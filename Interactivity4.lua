module(..., package.seeall)

local function restartIt()
	preloader:changeScene("Interactivity4","crossfade")
end

new = function ( params )
	soundController.killAll()
	
	soundController.playNew{
					path = "assets/sound/interactivity1a4.mp3",
					loops = -1,
					identifier = "bgsound",
					pausable = false,
					staticChannel = 1,
					actionTimes = {},
					action =	function()
								end,
					onComplete = function()
								end
					}
	------------------
	-- Imports
	------------------
	local ui = require("ui")
	local util = require("util")
	local gPS = require( "gPS" )
	
	------------------
	-- Variables
	------------------
	local width = display.contentWidth
	local height = display.contentHeight
	
	local normalSpeed = 5
	local speed = 5
	
	local scaleSheets = 1
	if display.contentScaleX<=0.5 then --this wonderful new API will let you know if you're scaling your content and thus if it's playing on a highres device. Since my config.lua has an x size of 480 and the device x is 960, we get the .5.
		scaleSheets = 0.5
	end
	
	local paused = false
	
	local menuButton
	local overlay
	
	local screenMessages = ui.newScreenMessages()
	
	local misses = 0
	local extras = 0
	local startTime = 0
	local finishTime = 0
	
	local function addMisses(message,value,x,y)
		if type(message) ~= "string" then
			message,value,x,y = "",message,value,x
		end
		misses = misses + value
		if message and message ~= "" then message = message.." " end
		--screenMessages.newMessage(message.."-"..value*1000,x,y)
		screenMessages.newMessage("-"..value*1000,x,y)
	end
	
	local function addExtras(message,value,x,y)
		if type(message) ~= "string" then
			message,value,x,y = "",message,value,x
		end
		extras = extras + value
		if message and message ~= "" then message = message.." " end
		--screenMessages.newMessage(message.."+"..value*1000,x,y)
		screenMessages.newMessage("+"..value*1000,x,y)
	end
	
	--====================================================================--
	-- SET UP A LOCAL GROUP THAT WILL BE RETURNED
	--====================================================================--
	local localGroup = display.newGroup()
	localGroup:insert(screenMessages.displayObject)
	
	-- LOWER LAYER, THE BACKGROUND COLOR
	local backgroundColor = display.newRect(0,0,width,height)
	backgroundColor:setFillColor(255,255,235)
	localGroup:insert(backgroundColor)
	
	local startAdventure
	local startDemoLoop
	local startInteraction
	local startTheParty
	local startTransition
	
	local killAdventure
	local killDemoLoop
	local killInteraction
	local killTheParty
	local killTransition
	
	local gameOver
	local pauseIt
	local continueIt
	
	local function killAll()
		paused = nil
		gameOver = nil
		pauseIt = nil
		continueIt = nil
		screenMessages.kill()
		if killAdventure then
			killAdventure()
		end
		if killDemoLoop then
			killDemoLoop()
		end
		if killInteraction then
			killInteraction()
		end
		if killTheParty then
			killTheParty()
		end
		if killTransition then
			killTransition()
		end
	end
	
	local difficultyLevel = getDifficulty()
	
	--======================================
	-- START ADVENTURE
	--======================================
	local function prepareWelcomeScreen()
		local loadingBackground = display.newImageRect("assets/world/silverGardenSky.jpg",width,height)
		loadingBackground:setReferencePoint(display.TopLeftReferencePoint)
		loadingBackground.x = 0
		loadingBackground.y = 0
		localGroup:insert(loadingBackground)
		loadingBackground.isVisible = false
		
		local titleLabel = util.centeredWrappedText("Adventure 4\nHelp Mary win her first race", 30, 36, mainFont1, {67,34,15,255})
		titleLabel.y = 0
		titleLabel.x = width/2
		localGroup:insert(titleLabel)
		titleLabel.isVisible = false
		
		titleLabel.alpha=0
		transition.to(titleLabel,{alpha=1,time=1500})
		
		local function continue()
			localGroup:remove(loadingBackground)
			localGroup:remove(titleLabel)
			
			loadingBackground = nil
			titleLabel = nil
			
			continue = nil
			killAdventure = nil
		end
		killAdventure = function()
			startAdventure=nil
			vanish=nil
			continue()
		end
		
		local function vanish()
			pauseIt = nil
			continueIt = nil
			
			startDemoLoop()
			timer.performWithDelay(300, continue)
			
			vanish = nil
		end
		
		startAdventure = function()
			soundController.playNew{
						path = "assets/sound/voices/cap4/int4_N1.mp3",
						actionTimes = {4500},
						identifier = "directions",
						action =	function()
										if vanish then
											vanish()
										end
									end,
						onComplete = function()
										if vanish then
											vanish()
										end
									end
						}
			--local thisTimer = timer.performWithDelay(3000, vanish)
			
			loadingBackground.isVisible = true
			titleLabel.isVisible = true
			
			pauseIt = function()
				--timer.pause(thisTimer)
			end
			
			continueIt = function()
				--timer.resume(thisTimer)
			end
			
			startAdventure = nil
		end
	end
	prepareWelcomeScreen()
	
	local background = display.newImageRect("assets/background_loop.jpg",960,320)
	background:setReferencePoint(display.TopLeftReferencePoint)
	background.x = 0
	background.y = -75
	background.isVisible=false
	localGroup:insert(background)
	
	local mary = {}
	
	mary.openEyes = display.newImage("assets/Fly/Mary/EyeOpen.png")
	mary.closedEyes = display.newImage("assets/Fly/Mary/EyeClose.png")
	mary.Blinks = ui.blink(mary.openEyes,mary.closedEyes)
	
	mary.laughingAnimation = ui.newAnimation{
						 comps = {
						 {
						 path = "assets/Fly/Mary/wings.png",
						 x = { 300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35 },
						 y = { 255.75,260.1,264.5,268.85,273.2,277.65,281.95,286.35,282.45,278.6,274.7,270.8,266.9,263,259.1,255.25,251.35,255.3,259.1,263.05,266.9,270.8,274.65,278.6,282.45,286.35,282.45,278.6,274.7,270.8,266.9,263,259.1,255.25,251.35 },
						 rotation = { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
						 xScale = { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 },
						 yScale = { 0.937469482421875,0.87493896484375,0.8123931884765625,0.7498626708984375,0.6873321533203125,0.6248016357421875,0.562255859375,0.499725341796875,0.5553131103515625,0.61090087890625,0.666473388671875,0.7220611572265625,0.7776641845703125,0.833251953125,0.888824462890625,0.9444122314453125,1,0.9444122314453125,0.888824462890625,0.833251953125,0.7776641845703125,0.7220611572265625,0.666473388671875,0.61090087890625,0.5553131103515625,0.499725341796875,0.5553131103515625,0.61090087890625,0.666473388671875,0.7220611572265625,0.7776641845703125,0.833251953125,0.888824462890625,0.9444122314453125,1 },
						 },{
						 path = "assets/Fly/Mary/h1.png",
						 x = { 332.2,331.15,330.15,329.05,328,327.15,326.2,325.25,326.45,327.6,328.8,329.95,331.15,332.3,333.45,334.65,335.85,334.65,333.45,332.35,331.15,329.95,328.75,327.55,326.35,325.2,326.05,326.9,327.75,328.6,329.55,330.35,331.3,332.3,333.25 },
						 y = { 142.85,140.4,137.95,135.5,133.15,131.45,129.7,128.1,130.25,132.4,134.6,136.8,138.95,141.2,143.35,145.55,147.8,145.55,143.35,141.15,138.95,136.85,134.6,132.45,130.2,128.1,129.65,131.15,132.65,134.2,135.75,137.2,139.9,142.6,145.25 },
						 rotation = { -4.99249267578125,-4.1098480224609375,-3.225250244140625,-2.340850830078125,-1.456207275390625,-1.7471160888671875,-2.0388031005859375,-2.329498291015625,-1.967193603515625,-1.604736328125,-1.2412567138671875,-0.88031005859375,-0.517547607421875,-0.1556243896484375,0.2054443359375,0.5673828125,0.92926025390625,0.5673828125,0.2045745849609375,-0.156494140625,-0.5184173583984375,-0.881195068359375,-1.2421417236328125,-1.6056060791015625,-1.9680633544921875,-2.329498291015625,-2.0693511962890625,-1.8091278076171875,-1.553192138671875,-1.292816162109375,-1.034149169921875,-0.77630615234375,-2.475250244140625,-4.1776885986328125,-5.8770904541015625 },
						 },{
						 path = "assets/Fly/Mary/h2.png",
						 x = { 266.85,265.45,264.15,263,261.85,260.95,260,259.05,260.25,261.45,262.65,263.8,264.95,266.05,267.3,268.5,269.65,268.5,267.3,266.1,264.95,263.85,262.65,261.5,260.3,259.1,260.05,260.75,261.65,262.5,263.35,264.2,265.35,266.65,268.25 },
						 y = { 140.35,138.95,137.45,136.05,134.7,133.25,131.85,130.5,132.25,134.05,135.75,137.5,139.25,141.1,142.9,144.65,146.45,144.65,142.9,141.1,139.3,137.55,135.8,134.1,132.3,130.55,131.75,133,134.2,135.35,136.65,137.85,139.15,140.5,141.9 },
						 rotation = { 8.779922485351563,6.2211761474609375,3.66253662109375,1.10406494140625,-1.45184326171875,-1.743621826171875,-2.03704833984375,-2.3277587890625,-1.964569091796875,-1.60211181640625,-1.2386322021484375,-0.878570556640625,-0.51580810546875,-0.1529998779296875,0.208953857421875,0.57000732421875,0.931884765625,0.57000732421875,0.20806884765625,-0.15386962890625,-0.5166778564453125,-0.8794403076171875,-1.2395172119140625,-1.6029815673828125,-1.9654541015625,-2.3277587890625,-2.0693511962890625,-1.80999755859375,-1.5514373779296875,-1.292816162109375,-1.034149169921875,-0.77630615234375,3.2618408203125,7.3005523681640625,11.337509155273438 },
						 },{
						 path = "assets/Fly/Mary/h3.png",
						 x = { 187.15,185.3,183.6,182.2,180.95,180.05,179.4,179.05,179.85,180.65,181.7,182.8,184.1,185.5,186.95,188.6,190.5,188.8,187.3,185.8,184.35,183.05,181.7,180.5,179.45,178.75,179.25,179.8,180.7,181.7,182.8,184.15,185.35,187.15,189.3 },
						 y = { 125.55,127.6,129.65,131.7,133.9,136.65,139.4,142.15,141.2,140.1,139.05,138,137,135.95,135.25,134.6,133.85,133.95,134,134.2,134.3,134.5,134.65,136.7,138.75,140.85,139,137.15,135.35,133.55,131.6,129.9,127.75,125.6,123.55 },
						 rotation = { 14.98016357421875,12.513351440429688,10.045135498046875,7.5773468017578125,5.108734130859375,0.4624786376953125,-4.185516357421875,-8.833709716796875,-5.78277587890625,-2.734375,0.3164825439453125,3.3664093017578125,6.417236328125,9.465164184570313,12.212203979492188,14.958953857421875,17.70379638671875,15.676223754882813,13.645553588867188,11.615432739257813,9.585906982421875,7.556732177734375,5.5265045166015625,1.2631072998046875,-2.9986114501953125,-7.2644195556640625,-3.829681396484375,-0.3977813720703125,3.0326080322265625,6.462982177734375,9.89501953125,13.32562255859375,14.700775146484375,16.074172973632813,17.449554443359375 },
						 },{
						 path = "assets/Fly/Mary/h1.png",
						 x = { 272.65,271.65,270.65,269.6,268.6,267.55,266.55,265.6,266.8,268,269.25,270.45,271.7,272.9,274.1,275.4,276.6,275.4,274.15,272.9,271.7,270.45,269.25,268,266.8,265.6,266.45,267.35,268.3,269.2,270.15,271,271.9,272.85,273.7 },
						 y = { 145.5,144,142.4,140.95,139.35,137.8,136.3,134.75,136.6,138.6,140.5,142.45,144.35,146.3,148.25,150.25,152.2,150.25,148.25,146.3,144.35,142.5,140.55,138.6,136.6,134.75,136.05,137.5,138.8,140.25,141.6,143,144.35,145.7,147.1 },
						 rotation = { -19.277114868164063,-19.399322509765625,-19.522125244140625,-19.6455078125,-19.771804809570313,-19.89404296875,-20.01763916015625,-20.141799926757813,-19.98675537109375,-19.83294677734375,-19.680404663085938,-19.526779174804688,-19.3736572265625,-19.219451904296875,-19.0665283203125,-18.912521362304688,-18.759811401367188,-18.912521362304688,-19.06573486328125,-19.220230102539063,-19.3736572265625,-19.526779174804688,-19.680404663085938,-19.83294677734375,-19.98675537109375,-20.141799926757813,-20.031524658203125,-19.921875,-19.812835693359375,-19.702102661132813,-19.591995239257813,-19.4832763671875,-19.374435424804688,-19.262313842773438,-19.152389526367188 },
						 },{
						 path = "assets/Fly/Mary/h2.png",
						 x = { 213.55,212.5,211.4,210.3,209.3,208.4,207.5,206.6,207.75,208.95,210.15,211.4,212.75,214.05,215.5,217.05,218.6,217.1,215.55,214.15,212.8,211.45,210.1,208.95,207.75,206.6,207.4,208.25,209.15,210,210.9,211.8,212.75,213.7,214.7 },
						 y = { 161.5,158.95,156.55,154.1,151.6,149.15,146.7,144.25,147.3,150.45,153.45,156.5,159.6,162.65,165.75,168.8,171.85,168.8,165.75,162.6,159.6,156.5,153.45,150.45,147.3,144.25,146.4,148.55,150.75,153,155.2,157.35,159.55,161.75,163.95 },
						 rotation = { -12.308212280273438,-10.503067016601563,-8.69879150390625,-6.89764404296875,-5.0931243896484375,-3.291473388671875,-1.48504638671875,0.3164825439453125,-1.9261474609375,-4.1707305908203125,-6.4155120849609375,-8.65863037109375,-10.90570068359375,-13.149169921875,-15.393814086914063,-17.638717651367188,-19.881668090820313,-17.638717651367188,-15.394622802734375,-13.15081787109375,-10.90570068359375,-8.66033935546875,-6.4155120849609375,-4.1707305908203125,-1.9261474609375,0.3164825439453125,-1.2884521484375,-2.8904876708984375,-4.4923553466796875,-6.095001220703125,-7.700164794921875,-9.3043212890625,-10.906539916992188,-12.509185791015625,-14.111923217773438 },
						 },{
						 path = "assets/Fly/Mary/h3.png",
						 x = { 140.6,140.2,140.35,140.95,142.1,142.95,143.85,145.05,143.65,142.55,141.9,141.5,141.6,142.15,143.05,144.35,146.2,144.35,143.05,142.1,141.6,141.55,141.8,142.55,143.65,145.1,144.05,143.1,142.45,141.9,141.55,141.4,140.8,140.85,141.6 },
						 y = { 176.9,178.2,179.2,180.2,180.75,179.95,178.9,177.75,179.2,180.4,181.4,182.25,183,183.55,184,184.5,184.85,184.5,184.1,183.65,183.1,182.3,181.45,180.45,179.3,177.85,178.8,179.75,180.6,181.25,181.9,182.4,180.35,178.1,175.65 },
						 rotation = { -5.4944610595703125,-11.529006958007813,-17.563262939453125,-23.595611572265625,-29.630661010742188,-33.69392395019531,-37.75242614746094,-41.81361389160156,-36.76170349121094,-31.705810546875,-26.65380859375,-21.598831176757813,-16.546890258789063,-11.4920654296875,-6.44140625,-1.3889312744140625,3.6660308837890625,-1.3889312744140625,-6.4422760009765625,-11.493743896484375,-16.548492431640625,-21.601852416992188,-26.655899047851563,-31.707717895507813,-36.76170349121094,-41.81361389160156,-38.20542907714844,-34.595123291015625,-30.9871826171875,-27.37750244140625,-23.768646240234375,-20.157211303710938,-13.260208129882813,-6.3602447509765625,0.53765869140625 },
						 },{
						 path = "assets/Fly/Mary/arm.png",
						 x = { 297.3,298.35,299.35,300.2,301.15,301.4,301.8,302.05,301.25,300.45,299.5,298.6,297.65,296.65,296.1,295.5,294.9,296.05,297.1,298.1,299.1,300,300.9,301.25,301.6,301.95,301.25,300.45,299.55,298.7,297.9,296.9,296.75,296.4,296.2 },
						 y = { 375.75,373.3,370.95,368.5,365.95,364.25,362.6,360.85,363.6,366.4,369.1,371.75,374.25,376.9,379.2,381.45,383.65,381.1,378.35,375.65,372.85,370.1,367.3,365.1,363,360.85,363.15,365.3,367.35,369.45,371.55,373.5,375.1,376.6,378.05 },
						 rotation = { -60.47117614746094,-63.329437255859375,-66.18743896484375,-69.04566955566406,-71.90274047851563,-72.36921691894531,-72.83253479003906,-73.29978942871094,-70.94207763671875,-68.58430480957031,-66.22549438476563,-63.867401123046875,-61.510223388671875,-59.15245056152344,-57.95185852050781,-56.751983642578125,-55.55265808105469,-58.199371337890625,-60.842529296875,-63.48883056640625,-66.13330078125,-68.78157043457031,-71.42694091796875,-72.05136108398438,-72.67465209960938,-73.29978942871094,-70.95144653320313,-68.60476684570313,-66.25772094726563,-63.910400390625,-61.5635986328125,-59.21759033203125,-58.683074951171875,-58.14823913574219,-57.61456298828125 },
						 },{
						 path = "assets/Fly/Mary/forearm.png",
						 x = { 337.55,339.55,341.45,343.2,344.75,344.95,345.1,345.2,344.05,342.8,341.4,339.9,338.3,336.6,335.8,334.9,334,336,337.9,339.75,341.35,342.95,344.4,344.65,345,345.2,344,342.65,341.35,339.8,338.25,336.6,336.1,335.75,335.4 },
						 y = { 398.6,394.35,389.8,385.3,380.75,378.85,376.9,375.05,379.45,383.8,388.1,392.3,396.5,400.65,403.6,406.6,409.55,405.15,400.75,396.25,391.7,387.05,382.35,379.95,377.45,375,378.85,382.7,386.45,390.2,393.85,397.45,399.3,401.1,402.9 },
						 rotation = { -58.405059814453125,-60.7698974609375,-63.13499450683594,-65.49961853027344,-67.86654663085938,-67.83879089355469,-67.81330871582031,-67.78782653808594,-66.04124450683594,-64.29527282714844,-62.549468994140625,-60.80320739746094,-59.0584716796875,-57.31196594238281,-56.72508239746094,-56.138763427734375,-55.550872802734375,-57.58465576171875,-59.618682861328125,-61.65087890625,-63.6851806640625,-65.7193603515625,-67.75260925292969,-67.76310729980469,-67.77433776855469,-67.78782653808594,-65.87646484375,-63.967559814453125,-62.05735778808594,-60.147216796875,-58.239166259765625,-56.329681396484375,-56.23291015625,-56.13575744628906,-56.0382080078125 },
						 },{
						 path = "assets/Fly/Mary/hand.png",
						 x = { 381,383.1,384.95,386.6,388,388.15,388.55,388.75,387.55,386.25,384.8,383.2,381.5,379.6,378.7,377.75,376.7,378.95,381.05,382.9,384.65,386.2,387.6,387.95,388.35,388.7,387.6,386.25,384.9,383.25,381.6,379.75,379.4,379.1,378.8 },
						 y = { 401.8,395.65,389.45,383.2,376.8,375,373.15,371.25,376.95,382.5,388.1,393.55,399,404.4,407.8,411.2,414.55,408.7,402.8,396.75,390.75,384.6,378.45,376.05,373.65,371.2,376.45,381.7,386.9,392.05,397.1,402.1,404.05,405.85,407.8 },
						 rotation = { -57.59461975097656,-59.7685546875,-61.9407958984375,-64.11526489257813,-66.28849792480469,-66.06973266601563,-65.84878540039063,-65.62933349609375,-64.12376403808594,-62.61766052246094,-61.11460876464844,-59.60762023925781,-58.101593017578125,-56.595123291015625,-56.24742126464844,-55.90130615234375,-55.5496826171875,-57.34417724609375,-59.13763427734375,-60.9326171875,-62.72599792480469,-64.52070617675781,-66.31414794921875,-66.08653259277344,-65.85752868652344,-65.62933349609375,-63.89207458496094,-62.1529541015625,-60.414276123046875,-58.676055908203125,-56.937652587890625,-55.198638916015625,-55.272979736328125,-55.34686279296875,-55.4202880859375 },
						 },{
						 path = "assets/Fly/Mary/knee.png",
						 x = { 82.25,82.4,82.95,83.85,84.95,86.4,88.15,90.3,91.3,92.35,93.55,94.8,96.2,97.65,99.2,100.7,102.3,100.65,99.15,97.6,96.15,94.8,93.5,92.35,91.3,90.3,88.45,86.8,85.4,84.3,83.45,82.9,82.45,82.35,82.45 },
						 y = { 362.1,355.6,349.15,342.75,336.4,330.15,323.9,317.8,318.8,319.8,320.9,322.2,323.5,324.9,326.4,328.05,329.7,328,326.4,324.9,323.45,322.15,320.85,319.75,318.8,317.8,323.2,328.8,334.35,340,345.7,351.45,357.15,362.8,368.55 },
						 rotation = { 11.9154052734375,16.086288452148438,20.258071899414063,24.427947998046875,28.600418090820313,32.77093505859375,36.94139099121094,41.110992431640625,44.943572998046875,48.77702331542969,52.61003112792969,56.44367980957031,60.27430725097656,64.10818481445313,67.93934631347656,71.77328491210938,75.60475158691406,71.77250671386719,67.93934631347656,64.10748291015625,60.273651123046875,56.441864013671875,52.61003112792969,48.77702331542969,44.943572998046875,41.110992431640625,37.40376281738281,33.69512939453125,29.988723754882813,26.28179931640625,22.573165893554688,18.866348266601563,15.157867431640625,11.450088500976563,7.7430877685546875 },
						 },{
						 path = "assets/Fly/Mary/foot.png",
						 x = { 33.25,34.05,35.45,37.4,39.9,43,46.8,51.05,53.85,57,60.45,64.15,68.1,72.25,76.75,81.4,86.15,81.4,76.8,72.3,68.15,64.2,60.45,57,53.85,51.05,47.15,43.8,40.9,38.4,36.35,34.85,33.75,33.2,33.15 },
						 y = { 356.45,346.4,336.45,326.65,316.95,307.5,298.25,289.25,287.5,285.9,284.5,283.45,282.55,282,281.65,281.7,282,281.7,281.65,282.05,282.6,283.5,284.55,285.95,287.55,289.35,297.3,305.45,313.85,322.25,330.95,339.75,348.6,357.5,366.45 },
						 rotation = { 43.08125305175781,47.017333984375,50.95738220214844,54.895599365234375,58.833251953125,62.76953125,66.70758056640625,70.64579772949219,74.76884460449219,78.89128112792969,83.01361083984375,87.13568115234375,91.25785827636719,95.37922668457031,99.50343322753906,103.62657165527344,107.74822998046875,103.62657165527344,99.50343322753906,95.38095092773438,91.25785827636719,87.13568115234375,83.01361083984375,78.89128112792969,74.76803588867188,70.64579772949219,67.14564514160156,63.64515686035156,60.14524841308594,56.646331787109375,53.146392822265625,49.64552307128906,46.14509582519531,42.64341735839844,39.141632080078125 },
						 },{
						 path = "assets/Fly/Mary/knee.png",
						 x = { 108.65,106.35,104.2,101.95,100.05,98.15,96.5,94.9,93.4,92.1,91.1,90.3,89.8,89.5,89.45,89.7,90.25,89.7,89.5,89.6,89.85,90.35,91.1,92.15,93.4,94.9,96.25,97.8,99.45,101.15,103,104.95,106.9,108.85,110.95 },
						 y = { 326.4,325.9,325.5,325.35,325.35,325.6,326,326.6,332,337.7,343.3,349.05,354.8,360.65,366.45,372.25,378.15,372.3,366.5,360.75,354.85,349.1,343.35,337.75,332.05,326.6,326.15,325.75,325.55,325.45,325.55,325.65,326.05,326.55,327.2 },
						 rotation = { 76.61148071289063,71.59915161132813,66.58746337890625,61.57373046875,56.56163024902344,51.55137634277344,46.53910827636719,41.52723693847656,37.68843078613281,33.84797668457031,30.007080078125,26.169219970703125,22.330474853515625,18.49053955078125,14.65087890625,10.811248779296875,6.97259521484375,10.811248779296875,14.65087890625,18.49053955078125,22.330474853515625,26.169219970703125,30.007080078125,33.84797668457031,37.68843078613281,41.52723693847656,45.98097229003906,50.437042236328125,54.89208984375,59.34745788574219,63.8026123046875,68.25770568847656,72.71290588378906,77.16958618164063,81.62611389160156 },
						 },{
						 path = "assets/Fly/Mary/foot.png",
						 x = { 94.05,88.4,82.9,77.6,72.35,67.55,62.85,58.55,54.8,51.45,48.65,46.2,44.35,42.9,42,41.6,41.7,41.6,42,42.85,44.3,46.2,48.6,51.45,54.85,58.65,62.45,66.5,70.8,75.2,80,84.75,89.7,94.7,99.8 },
						 y = { 282,282.4,283.2,284.45,286.15,288.3,290.85,293.7,302.05,310.6,319.35,328.15,337.2,346.4,355.7,365.1,374.45,365.1,355.75,346.5,337.25,328.15,319.3,310.55,302,293.65,291.1,288.85,286.85,285.15,283.85,282.85,282.25,282,282.15 },
						 rotation = { 102.11445617675781,99.16548156738281,96.21598815917969,93.26620483398438,90.31822204589844,87.37205505371094,84.42239379882813,81.47384643554688,77.04331970214844,72.61174011230469,68.18231201171875,63.7491455078125,59.318359375,54.888580322265625,50.4547119140625,46.02305603027344,41.59185791015625,46.02305603027344,50.453155517578125,54.885650634765625,59.31706237792969,63.74774169921875,68.1800537109375,72.61093139648438,77.04248046875,81.47384643554688,84.09523010253906,86.71549987792969,89.33734130859375,91.95759582519531,94.578369140625,97.19903564453125,99.82203674316406,102.4425048828125,105.06333923339844 },
						 },{
						 path = "assets/Fly/Mary/skirt.png",
						 x = { 155.9,155.95,156,156.1,156.15,156.25,156.3,156.4,156.3,156.2,156.15,156.05,156,155.9,155.9,155.75,155.75,155.75,155.85,155.9,156,156.05,156.1,156.2,156.3,156.4,156.3,156.25,156.2,156.1,156.05,156,155.95,155.85,155.8 },
						 y = { 352.35,351.3,350.2,349.2,348.15,347.05,345.95,344.85,346.3,347.75,349.2,350.6,352.1,353.5,354.95,356.35,357.75,356.3,354.9,353.45,352,350.5,349.1,347.7,346.25,344.85,345.9,346.95,347.9,348.85,349.85,350.85,351.7,352.55,353.3 },
						 rotation = { -0.1879730224609375,0.082183837890625,0.3514556884765625,0.62158203125,0.892547607421875,1.1617431640625,1.4326171875,1.7025604248046875,1.367095947265625,1.0306396484375,0.6941375732421875,0.3584442138671875,0.022735595703125,-0.31298828125,-0.648681640625,-0.982574462890625,-1.3199005126953125,-0.982574462890625,-0.647796630859375,-0.31298828125,0.022735595703125,0.3584442138671875,0.6932525634765625,1.0297698974609375,1.3662109375,1.7025604248046875,1.4623260498046875,1.2229156494140625,0.9817047119140625,0.7413330078125,0.5018157958984375,0.2613983154296875,0.0218505859375,-0.2176971435546875,-0.4572296142578125 },
						 },{
						 path = "assets/Fly/Mary/body.png",
						 x = { 206.65,206.55,206.3,206.2,206.1,206,205.8,205.7,205.75,205.8,205.9,205.9,205.95,206,206.05,206.05,206,206,206.05,205.95,206,205.85,205.9,205.8,205.85,205.75,205.75,205.9,205.9,206.05,206.05,206.15,206.4,206.55,206.75 },
						 y = { 344.25,343.2,342.15,341.1,340.05,338.95,337.8,336.7,338.15,339.6,341.05,342.45,343.95,345.45,346.85,348.35,349.8,348.35,346.85,345.4,343.95,342.4,341,339.55,338.15,336.75,337.7,338.7,339.75,340.7,341.75,342.7,343.6,344.45,345.4 },
						 rotation = { -1.2482452392578125,-1.54620361328125,-1.8414459228515625,-2.138336181640625,-2.4351043701171875,-2.7326202392578125,-3.027374267578125,-3.3237152099609375,-2.9532623291015625,-2.5860595703125,-2.2169036865234375,-1.8466796875,-1.478057861328125,-1.108428955078125,-0.7404632568359375,-0.371551513671875,0,-0.371551513671875,-0.7413330078125,-1.1092987060546875,-1.47979736328125,-1.8475494384765625,-2.2186431884765625,-2.586944580078125,-2.9541473388671875,-3.3237152099609375,-3.0613861083984375,-2.796295166015625,-2.5345916748046875,-2.2718963623046875,-2.0073699951171875,-1.743621826171875,-1.47979736328125,-1.2176666259765625,-0.95111083984375 },
						 xOffset = 40,
						 yOffset = 17,
						 },{
						 path = "assets/Fly/Mary/head.png",
						 x = { 360.85,360.6,360.25,359.9,359.6,359.3,358.9,358.65,359,359.45,359.85,360.25,360.7,361.05,361.55,361.95,362.35,361.95,361.55,361.1,360.7,360.25,359.8,359.4,359,358.6,358.85,359.15,359.5,359.8,360.1,360.4,360.7,360.95,361.15 },
						 y = { 260.2,258.4,256.55,254.7,252.8,251,249.15,247.3,249.65,252.05,254.45,256.8,259.2,261.55,263.95,266.3,268.7,266.3,263.95,261.5,259.2,256.85,254.45,252.1,249.65,247.3,248.95,250.7,252.3,253.95,255.7,257.25,258.9,260.5,262.05 },
						 rotation = { -77.55583190917969,-77.84877014160156,-78.13984680175781,-78.42903137207031,-78.72050476074219,-79.01087951660156,-79.30265808105469,-79.59332275390625,-79.23008728027344,-78.86856079101563,-78.50625610351563,-78.14488220214844,-77.78277587890625,-77.42001342773438,-77.05825805664063,-76.69755554199219,-76.33462524414063,-76.69755554199219,-77.05909729003906,-77.42167663574219,-77.78361511230469,-78.14570617675781,-78.50709533691406,-78.86856079101563,-79.23092651367188,-79.59332275390625,-79.33474731445313,-79.07575988769531,-78.81723022460938,-78.55915832519531,-78.30072021484375,-78.04025268554688,-77.78361511230469,-77.52497863769531,-77.26687622070313 },
						 },{
						 displayObject = mary.closedEyes,
						 x = { 360.85,360.6,360.25,359.9,359.6,359.3,358.9,358.65,359,359.45,359.85,360.25,360.7,361.05,361.55,361.95,362.35,361.95,361.55,361.1,360.7,360.25,359.8,359.4,359,358.6,358.85,359.15,359.5,359.8,360.1,360.4,360.7,360.95,361.15 },
						 y = { 260.2,258.4,256.55,254.7,252.8,251,249.15,247.3,249.65,252.05,254.45,256.8,259.2,261.55,263.95,266.3,268.7,266.3,263.95,261.5,259.2,256.85,254.45,252.1,249.65,247.3,248.95,250.7,252.3,253.95,255.7,257.25,258.9,260.5,262.05 },
						 rotation = { -77.55583190917969,-77.84877014160156,-78.13984680175781,-78.42903137207031,-78.72050476074219,-79.01087951660156,-79.30265808105469,-79.59332275390625,-79.23008728027344,-78.86856079101563,-78.50625610351563,-78.14488220214844,-77.78277587890625,-77.42001342773438,-77.05825805664063,-76.69755554199219,-76.33462524414063,-76.69755554199219,-77.05909729003906,-77.42167663574219,-77.78361511230469,-78.14570617675781,-78.50709533691406,-78.86856079101563,-79.23092651367188,-79.59332275390625,-79.33474731445313,-79.07575988769531,-78.81723022460938,-78.55915832519531,-78.30072021484375,-78.04025268554688,-77.78361511230469,-77.52497863769531,-77.26687622070313 },
						 scaleComponent = true,
						 },{
						 displayObject = mary.openEyes,
						 x = { 360.85,360.6,360.25,359.9,359.6,359.3,358.9,358.65,359,359.45,359.85,360.25,360.7,361.05,361.55,361.95,362.35,361.95,361.55,361.1,360.7,360.25,359.8,359.4,359,358.6,358.85,359.15,359.5,359.8,360.1,360.4,360.7,360.95,361.15 },
						 y = { 260.2,258.4,256.55,254.7,252.8,251,249.15,247.3,249.65,252.05,254.45,256.8,259.2,261.55,263.95,266.3,268.7,266.3,263.95,261.5,259.2,256.85,254.45,252.1,249.65,247.3,248.95,250.7,252.3,253.95,255.7,257.25,258.9,260.5,262.05 },
						 rotation = { -77.55583190917969,-77.84877014160156,-78.13984680175781,-78.42903137207031,-78.72050476074219,-79.01087951660156,-79.30265808105469,-79.59332275390625,-79.23008728027344,-78.86856079101563,-78.50625610351563,-78.14488220214844,-77.78277587890625,-77.42001342773438,-77.05825805664063,-76.69755554199219,-76.33462524414063,-76.69755554199219,-77.05909729003906,-77.42167663574219,-77.78361511230469,-78.14570617675781,-78.50709533691406,-78.86856079101563,-79.23092651367188,-79.59332275390625,-79.33474731445313,-79.07575988769531,-78.81723022460938,-78.55915832519531,-78.30072021484375,-78.04025268554688,-77.78361511230469,-77.52497863769531,-77.26687622070313 },
						 scaleComponent = true,
						 },{
						 path = "assets/Fly/Mary/hair_forehead.png",
						 x = { 388.1,387.6,387.15,386.65,386.15,385.55,384.95,384.35,384.4,384.45,384.55,384.75,384.8,384.95,385.15,385.35,385.5,385.3,385.05,384.9,384.7,384.6,384.45,384.35,384.25,384.2,384.75,385.3,385.75,386.35,386.9,387.45,387.8,388.15,388.55 },
						 y = { 235.2,233.05,230.8,228.65,226.4,224.15,222.05,219.8,221.25,222.65,224.15,225.55,227.05,228.4,229.8,231.2,232.6,231.2,229.8,228.35,226.9,225.5,224.1,222.65,221.2,219.75,221.65,223.55,225.55,227.5,229.45,231.4,233.45,235.4,237.4 },
						 rotation = { -17.918563842773438,-18.066452026367188,-18.211715698242188,-18.3575439453125,-18.50311279296875,-18.647659301757813,-18.79351806640625,-18.938339233398438,-17.780731201171875,-16.627197265625,-15.471786499023438,-14.316482543945313,-13.159942626953125,-12.00408935546875,-10.847518920898438,-9.692123413085938,-8.534698486328125,-9.691268920898438,-10.8458251953125,-12.003250122070313,-13.158279418945313,-14.313201904296875,-15.470977783203125,-16.624786376953125,-17.780731201171875,-18.938339233398438,-18.809188842773438,-18.678253173828125,-18.550277709960938,-18.421310424804688,-18.291366577148438,-18.162796020507813,-18.033248901367188,-17.903518676757813,-17.774383544921875 },
						 },{
						 path = "assets/Fly/Mary/arm.png",
						 x = { 285.6,287.4,289.15,290.75,292.3,292.85,293.4,293.9,292.6,291.25,289.8,288.35,286.95,285.35,284.35,283.35,282.4,284,285.55,287.15,288.7,290.2,291.6,292.05,292.45,292.85,291.75,290.65,289.45,288.3,287,285.85,285.2,284.55,283.85 },
						 y = { 380.5,378.35,376.15,373.85,371.35,369.55,367.8,366,368.65,371.3,373.85,376.35,378.8,381.1,383.2,385.4,387.5,385.2,382.95,380.6,378.2,375.6,373,370.85,368.8,366.65,368.65,370.55,372.45,374.2,375.95,377.65,379.25,380.95,382.4 },
						 rotation = { -33.34025573730469,-37.41203308105469,-41.487030029296875,-45.561737060546875,-49.636383056640625,-50.815277099609375,-51.99592590332031,-53.175506591796875,-49.85484313964844,-46.535888671875,-43.216217041015625,-39.89544677734375,-36.57948303222656,-33.25901794433594,-31.116790771484375,-28.977142333984375,-26.835784912109375,-30.32012939453125,-33.80574035644531,-37.29216003417969,-40.77726745605469,-44.26124572753906,-47.7474365234375,-48.64375305175781,-49.53907775878906,-50.434967041015625,-47.72062683105469,-45.00611877441406,-42.293731689453125,-39.58061218261719,-36.86705017089844,-34.152618408203125,-32.52424621582031,-30.8939208984375,-29.26470947265625 },
						 },{
						 path = "assets/Fly/Mary/forearm.png",
						 x = { 314.15,319.15,323.9,328.45,332.65,333.95,335.25,336.45,333.35,330.1,326.5,322.8,318.8,314.7,312.35,310.05,307.7,311.95,316.05,320.1,323.9,327.6,331.05,332.15,333.1,334.1,331.45,328.65,325.65,322.5,319.2,315.75,313.5,311.2,308.8 },
						 y = { 422.75,418.2,413.25,407.95,402.3,399.15,396.1,393,398.45,403.75,408.95,413.85,418.5,423,425.9,428.75,431.45,427.6,423.55,419.3,414.65,410,404.95,401.9,398.75,395.5,399.85,404.1,408.05,411.9,415.5,419.05,421.75,424.3,426.8 },
						 rotation = { -34.52752685546875,-40.28688049316406,-46.04795837402344,-51.805908203125,-57.56596374511719,-60.4288330078125,-63.29383850097656,-66.15670776367188,-61.396209716796875,-56.634735107421875,-51.871307373046875,-47.108245849609375,-42.3463134765625,-37.58482360839844,-37.057373046875,-36.53208923339844,-36.00587463378906,-39.403594970703125,-42.80528259277344,-46.20379638671875,-49.60443115234375,-53.005584716796875,-56.40362548828125,-58.74244689941406,-61.08110046386719,-63.41957092285156,-59.20790100097656,-54.9969482421875,-50.78535461425781,-46.57460021972656,-42.363037109375,-38.14979553222656,-35.02357482910156,-31.89715576171875,-28.769973754882813 },
						 },{
						 path = "assets/Fly/Mary/hand.png",
						 x = { 349.15,355.65,361.5,366.7,371.15,372.4,373.5,374.55,371.75,368.4,364.65,360.25,355.5,350.25,347.8,345.35,342.85,347.9,352.8,357.35,361.75,365.7,369.35,370.45,371.5,372.4,369.85,366.95,363.65,360,356,351.55,348.6,345.3,341.95 },
						 y = { 439.1,430.85,422.2,412.9,403.35,398.25,393.2,388.2,396.9,405.55,413.9,422,429.8,437.25,440.55,443.75,446.85,440.9,434.55,428.05,421.2,414.15,406.85,402.15,397.5,392.7,399.9,406.85,413.8,420.45,426.95,433.15,437.85,442.4,446.8 },
						 rotation = { -35.44816589355469,-41.4295654296875,-47.40724182128906,-53.38670349121094,-59.36622619628906,-62.44972229003906,-65.53292846679688,-68.618408203125,-63.58271789550781,-58.54608154296875,-53.511962890625,-48.4752197265625,-43.440155029296875,-38.40354919433594,-37.603485107421875,-36.802642822265625,-36.004730224609375,-39.67604064941406,-43.35151672363281,-47.02435302734375,-50.69677734375,-54.37065124511719,-58.042388916015625,-60.65419006347656,-63.266632080078125,-65.87936401367188,-61.472412109375,-57.06617736816406,-52.65974426269531,-48.25105285644531,-43.84626770019531,-39.43907165527344,-36.115570068359375,-32.793182373046875,-29.471206665039063 },
						 },{
						 path = "assets/Fly/Mary/wings.png",
						 x = { 300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35,300.35 },
						 y = { 255.75,260.1,264.5,268.85,273.2,277.65,281.95,286.35,282.45,278.6,274.7,270.8,266.9,263,259.1,255.25,251.35,255.3,259.1,263.05,266.9,270.8,274.65,278.6,282.45,286.35,282.45,278.6,274.7,270.8,266.9,263,259.1,255.25,251.35 },
						 rotation = { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
						 xScale = { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 },
						 yScale = { 0.937469482421875,0.87493896484375,0.8123931884765625,0.7498626708984375,0.6873321533203125,0.6248016357421875,0.562255859375,0.499725341796875,0.5553131103515625,0.61090087890625,0.666473388671875,0.7220611572265625,0.7776641845703125,0.833251953125,0.888824462890625,0.9444122314453125,1,0.9444122314453125,0.888824462890625,0.833251953125,0.7776641845703125,0.7220611572265625,0.666473388671875,0.61090087890625,0.5553131103515625,0.499725341796875,0.5553131103515625,0.61090087890625,0.666473388671875,0.7220611572265625,0.7776641845703125,0.833251953125,0.888824462890625,0.9444122314453125,1 },
						 yOffset = 10,
						 },
						},
						 x = 0,
						 y = 0,
						 scale = 0.5,
						 speed = 0.5
						}
	mary.laughingAnimation.displayObject:setReferencePoint(display.CenterReferencePoint)
	mary.laughingAnimation.displayObject.x = width/2
	mary.laughingAnimation.displayObject.y = height/2 - 30
	mary.laughingAnimation.hide()
	
	local maryContainerGroup = display.newGroup()
	maryContainerGroup:insert(mary.laughingAnimation.displayObject)
	
	local blackOpenEyes = display.newImage("assets/flyingGirls/Black/EyeOpen.png")
	local blackClosedEyes = display.newImage("assets/flyingGirls/Black/EyeClose.png")
	local blackBlinks = ui.blink(blackOpenEyes,blackClosedEyes)
	
	local blueOpenEyes = display.newImage("assets/flyingGirls/Blue/EyeOpen.png")
	local blueClosedEyes = display.newImage("assets/flyingGirls/Blue/EyeClose.png")
	local blueBlinks = ui.blink(blueOpenEyes,blueClosedEyes)
	
	local blackAnimation = ui.newAnimation{
						 comps = {
						 {
						 --larm
						 path = "assets/flyingGirls/Black/arm.png",
						 x = { 295.85,296.35,296.9,297.4,297.8,298.4,298.75,299.2,299.7,300.1,300.55,300.9,301.3,301.7,301.3,301,300.55,300.2,299.85,299.4,298.95,298.6,298.15,297.6,297.2,296.75,296.3,295.8,295.35 },
						 y = { 379.1,374.6,370.15,365.7,361.25,356.7,352.3,347.85,343.25,338.8,334.25,329.75,325.25,320.7,324.95,329.2,333.4,337.55,341.8,345.95,350.2,354.4,358.55,362.8,366.85,371.05,375.2,379.35,383.45 },
						 rotation = { -56.58050537109375,-57.612701416015625,-58.6441650390625,-59.67335510253906,-60.706695556640625,-61.73829650878906,-62.768829345703125,-63.7998046875,-64.83287048339844,-65.86335754394531,-66.89443969726563,-67.92507934570313,-68.95651245117188,-69.98854064941406,-69.02584838867188,-68.06185913085938,-67.09889221191406,-66.138427734375,-65.17543029785156,-64.21299743652344,-63.248504638671875,-62.28709411621094,-61.32550048828125,-60.36273193359375,-59.400543212890625,-58.43804931640625,-57.475128173828125,-56.51234436035156,-55.550872802734375 },
						 },{
						 --lforearm
						 path = "assets/flyingGirls/Black/forearm.png",
						 x = { 336.2,336.9,337.5,338.15,338.75,339.4,339.9,340.45,341.05,341.55,342.05,342.45,342.95,343.35,343,342.5,342.1,341.65,341.2,340.65,340.2,339.65,339.1,338.6,337.95,337.35,336.8,336.2,335.5 },
						 y = { 405.1,400.05,395,390,384.9,379.95,374.8,369.85,364.75,359.7,354.6,349.45,344.4,339.35,344.1,348.85,353.6,358.3,363,367.75,372.5,377.25,381.9,386.6,391.4,396,400.8,405.4,410.1 },
						 rotation = { -55.79414367675781,-56.03941345214844,-56.28126525878906,-56.525115966796875,-56.76971435546875,-57.01448059082031,-57.25688171386719,-57.5006103515625,-57.74317932128906,-57.98829650878906,-58.23284912109375,-58.47615051269531,-58.71881103515625,-58.962738037109375,-58.736053466796875,-58.50791931152344,-58.28089904785156,-58.0531005859375,-57.825164794921875,-57.59710693359375,-57.370208740234375,-57.14384460449219,-56.91554260253906,-56.68782043457031,-56.45947265625,-56.23291015625,-56.00694274902344,-55.77799987792969,-55.5496826171875 },
						 },{
						 --lhand
						 path = "assets/flyingGirls/Black/hand.png",
						 x = { 377.8,378.5,379.25,379.95,380.6,381.35,382.05,382.65,383.35,383.9,384.45,385,385.55,386.05,385.6,385.1,384.5,384.05,383.55,382.95,382.3,381.7,381.15,380.45,379.75,379.1,378.4,377.7,377 },
						 y = { 409.5,404.35,399.25,394.1,388.9,383.75,378.6,373.4,368.25,363.05,357.8,352.65,347.45,342.25,347.1,351.95,356.8,361.6,366.5,371.3,376.15,381,385.8,390.7,395.45,400.3,405.05,409.85,414.6 },
						 rotation = { -55.486724853515625,-55.423248291015625,-55.35691833496094,-55.29365539550781,-55.22813415527344,-55.16505432128906,-55.0997314453125,-55.03509521484375,-54.969970703125,-54.9061279296875,-54.841796875,-54.77581787109375,-54.711700439453125,-54.6470947265625,-54.70703125,-54.768829345703125,-54.828948974609375,-54.88798522949219,-54.948883056640625,-55.009857177734375,-55.06974792480469,-55.13032531738281,-55.189208984375,-55.25114440917969,-55.310791015625,-55.36994934082031,-55.43095397949219,-55.490875244140625,-55.550872802734375 },
						 },{
						 --lknee
						 path = "assets/flyingGirls/Black/knee.png",
						 x = { 95.05,92.9,90.95,89.3,88,86.95,86.2,85.8,85.6,85.75,86.25,87.05,88.1,89.45,88.15,87.1,86.35,85.8,85.6,85.65,85.95,86.55,87.3,88.4,89.8,91.35,93.1,95.15,97.45 },
						 y = { 322.4,323.85,325.35,327,328.75,330.6,332.45,334.45,336.45,338.45,340.35,342.3,344.25,346,344.35,342.65,340.8,338.95,337.05,335.2,333.35,331.55,329.85,328.1,326.55,325,323.6,322.3,321.2 },
						 rotation = { 43.8621826171875,39.7386474609375,35.61665344238281,31.49334716796875,27.371307373046875,23.2496337890625,19.126632690429688,15.004638671875,10.880401611328125,6.758880615234375,2.6366729736328125,-1.48504638671875,-5.60791015625,-9.728652954101563,-5.8822784423828125,-2.0344390869140625,1.8117523193359375,5.660736083984375,9.5076904296875,13.354598999023438,17.203369140625,21.051864624023438,24.8994140625,28.74578857421875,32.591949462890625,36.43940734863281,40.28790283203125,44.13587951660156,47.9840087890625 },
						 },{
						 --lfoot
						 path = "assets/flyingGirls/Black/foot.png",
						 x = { 59.55,55.45,51.65,48.45,45.55,43.15,41.2,39.75,38.85,38.35,38.3,38.8,39.85,41.4,39.95,38.95,38.4,38.3,38.55,39.35,40.55,42.1,44.1,46.45,49.25,52.45,55.95,59.85,64.05 },
						 y = { 291.9,295.55,299.45,303.5,307.85,312.35,317.05,321.85,326.7,331.65,336.6,341.55,346.55,351.45,346.85,342.3,337.6,332.95,328.3,323.7,319.25,314.8,310.55,306.4,302.45,298.6,295.05,291.65,288.6 },
						 rotation = { 79.23936462402344,75.87821960449219,72.5162353515625,69.15402221679688,65.79495239257813,62.43254089355469,59.07261657714844,55.711700439453125,52.349365234375,48.9874267578125,45.6259765625,42.26597595214844,38.90312194824219,35.541473388671875,38.678985595703125,41.8165283203125,44.95408630371094,48.09181213378906,51.22789001464844,54.36602783203125,57.50372314453125,60.640899658203125,63.777984619140625,66.91514587402344,70.05108642578125,73.18997192382813,76.32554626464844,79.463134765625,82.60055541992188 },
						 },{
						 --lwings
						 path = "assets/flyingGirls/Black/wings.png",
						 x = { 284.45,282.75,281.25,279.85,278.75,277.85,276.4,276.3,276.35,276.6,277,277.65,278.4,279.75,278.95,277.95,277.5,276.8,276.5,276.1,276.15,276,276.8,277.75,279,280.4,282.15,283.9,286.4 },
						 y = { 261.15,262.5,263.8,265.3,266.7,268.1,269.5,260.4,251.2,242.05,232.7,223.6,214.35,204.85,213.25,221.6,230,238.35,246.65,255.1,263.55,271.8,270,268.25,266.55,264.7,262.85,261.25,259.65 },
						 xScale = { 0.9991587402036113,0.9987489374703642,0.998333140716133,0.9979554697160695,0.9975471411900452,0.9971321673593317,0.9968759653705598,0.9971344888164468,0.9975121443414483,0.9978897660196558,0.9982717021922011,0.9986549288120934,0.999053582662365,0.9995573558228145,0.9991117314412805,0.9987704721432535,0.9984430155178265,0.9980891946836349,0.9977504888287282,0.9974149082583612,0.9970772114364663,0.9968759653705598,0.9971321673593317,0.9975465993444885,0.9979406300727723,0.9983182206275432,0.9987336800824734,0.9991587402036113,0.9995574952336542 },
						 yScale = { 0.9398609980336684,0.8801764951775201,0.8205087224117156,0.7608322220656681,0.7011857783511769,0.641556965607634,0.582202751099209,0.6415313964664313,0.7011762209786808,0.760820566095213,0.8204720076669474,0.880123840120183,0.939787006949345,0.9995573558228145,0.9472447291016151,0.8950304920640859,0.8428309213531858,0.7906425039058027,0.7384682835024293,0.686253715297549,0.6340971996309089,0.582202751099209,0.6415418382249647,0.7011857783511769,0.7608335561630836,0.8204934965000291,0.8801605834567293,0.9398613318481763,0.9995574952336542 },
						 rotation = { -0.2946319580078125,-0.77630615234375,-1.2578582763671875,-1.55230712890625,-2.035308837890625,-2.5171356201171875,-2.9951171875,-2.76751708984375,-2.5345916748046875,-2.3007049560546875,-2.2561798095703125,-2.0248260498046875,-1.7907867431640625,-1.7340087890625,-1.7855377197265625,-2.0134735107421875,-2.0518951416015625,-2.279754638671875,-2.5066680908203125,-2.5467987060546875,-2.771881103515625,-2.9951171875,-2.5171356201171875,-2.0344390869140625,-1.553192138671875,-1.2587432861328125,-0.77630615234375,-0.2946319580078125,-0.0008697509765625 },
						 },{
						 --rknee
						 path = "assets/flyingGirls/Black/knee.png",
						 x = { 83.8,83.25,83.1,83.35,83.85,84.75,86,87.55,89.5,91.65,94.25,97.15,100.35,103.8,100.55,97.55,94.8,92.35,90.2,88.35,86.7,85.35,84.4,83.7,83.25,83.15,83.3,83.85,84.6 },
						 y = { 376.55,367.6,358.6,349.6,340.6,331.65,322.7,313.9,305.2,296.6,288.15,279.75,271.6,263.75,271.2,278.7,286.45,294.3,302.3,310.4,318.6,326.9,335.2,343.6,351.95,360.35,368.8,377.2,385.45 },
						 rotation = { -1.55230712890625,2.7596588134765625,7.0759429931640625,11.389602661132813,15.705398559570313,20.020721435546875,24.335830688476563,28.6502685546875,32.96337890625,37.2783203125,41.59381103515625,45.90827941894531,50.2236328125,54.537322998046875,50.51142883300781,46.48480224609375,42.45692443847656,38.430389404296875,34.40272521972656,30.37677001953125,26.348526000976563,22.322235107421875,18.294509887695313,14.266403198242188,10.239974975585938,6.213409423828125,2.1854705810546875,-1.8405609130859375,-5.868438720703125 },
						 },{
						 --rfoot
						 path = "assets/flyingGirls/Black/foot.png",
						 x = { 36.2,35.55,35.45,36,37.2,38.9,41.3,44.1,47.6,51.5,56,61,66.45,72.3,66.8,61.75,56.95,52.7,48.85,45.5,42.5,40.15,38.15,36.75,35.8,35.45,35.6,36.25,37.5 },
						 y = { 383.6,371.15,358.7,346.25,333.8,321.45,309.35,297.4,285.65,274.15,262.9,252,241.5,231.4,240.85,250.6,260.75,271.15,281.8,292.6,303.7,314.95,326.4,337.85,349.45,361.1,372.8,384.45,396 },
						 rotation = { 30.220352172851563,34.16099548339844,38.10435485839844,42.04734802246094,45.987762451171875,49.9305419921875,53.87303161621094,57.815765380859375,61.75457763671875,65.69757080078125,69.6419677734375,73.58253479003906,77.52497863769531,81.46786499023438,77.78945922851563,74.10762023925781,70.42819213867188,66.7496337890625,63.071014404296875,59.3914794921875,55.712890625,52.03395080566406,48.353424072265625,44.67436218261719,40.99464416503906,37.31593322753906,33.63517761230469,29.9578857421875,26.277572631835938 },
						 },{
						 --skirt
						 path = "assets/flyingGirls/Black/skirt.png",
						 x = { 156.05,156.15,156.2,156.3,156.35,156.5,156.5,156.65,156.75,156.85,156.9,157,157.15,157.3,157.2,157.1,157,156.9,156.75,156.7,156.6,156.5,156.45,156.3,156.3,156.2,156.15,156.1,156.05 },
						 y = { 347.9,344.2,340.6,337,333.4,329.75,326.15,322.5,318.85,315.3,311.65,308.05,304.4,300.8,304.2,307.6,310.95,314.3,317.7,321.05,324.45,327.85,331.25,334.65,337.95,341.35,344.7,348.1,351.5 },
						 rotation = { -0.88555908203125,-0.4546051025390625,-0.022735595703125,0.409149169921875,0.8401031494140625,1.273590087890625,1.704315185546875,2.1365814208984375,2.5677490234375,2.999481201171875,3.4317474365234375,3.862762451171875,4.2950592041015625,4.7268829345703125,4.324615478515625,3.920196533203125,3.51885986328125,3.113677978515625,2.712554931640625,2.308563232421875,1.90606689453125,1.503387451171875,1.0996856689453125,0.6958770751953125,0.292877197265625,-0.109283447265625,-0.512298583984375,-0.915283203125,-1.317291259765625 },
						 },{
						 --body
						 path = "assets/flyingGirls/Black/body.png",
						 x = { 208.55,208.35,208.25,208.1,207.9,207.85,207.7,207.5,207.35,207.25,207.05,206.95,206.85,206.7,206.85,206.95,207.1,207.25,207.35,207.5,207.6,207.75,207.9,208,208.15,208.3,208.4,208.55,208.7 },
						 y = { 345.45,341.85,338.25,334.7,331.1,327.55,323.9,320.4,316.75,313.25,309.6,306.05,302.45,298.9,302.2,305.55,308.9,312.25,315.6,318.9,322.25,325.6,328.95,332.3,335.65,339,342.35,345.7,349.05 },
						 rotation = { -0.4755859375,-0.95111083984375,-1.4247589111328125,-1.899078369140625,-2.3740234375,-2.8495025634765625,-3.3237152099609375,-3.7983551025390625,-4.274200439453125,-4.74859619140625,-5.22320556640625,-5.69708251953125,-6.17279052734375,-6.6467742919921875,-6.2047576904296875,-5.761138916015625,-5.3185577392578125,-4.875335693359375,-4.4315338134765625,-3.9889373779296875,-3.54498291015625,-3.1032257080078125,-2.66021728515625,-2.216033935546875,-1.7733154296875,-1.3295135498046875,-0.8873138427734375,-0.4432373046875,0 },
						 xOffset = 33,
						 yOffset = 11,
						 },{
						 --rwings
						 path = "assets/flyingGirls/Black/wings.png",
						 x = { 287.05,285.3,283.75,282.4,281.2,280.15,279.1,279.1,279.2,279.6,280,280.65,281.4,282.45,281.6,280.65,280.2,279.5,279.2,278.8,278.85,278.7,279.5,280.55,281.8,283.1,284.85,286.6,289.1 },
						 y = { 262.9,264.3,265.6,267.2,268.55,270,271.3,262.1,252.9,243.8,234.45,225.25,216.15,206.65,215,223.45,231.8,240.1,248.4,256.95,265.2,273.6,271.9,270.15,268.35,266.5,264.75,263.1,261.45 },
						 xScale = { 0.9991587402036113,0.9987489374703642,0.998333140716133,0.9979554697160695,0.9975471411900452,0.9971321673593317,0.9968759653705598,0.9971344888164468,0.9975121443414483,0.9978897660196558,0.9982717021922011,0.9986549288120934,0.999053582662365,0.9995573558228145,0.9991117314412805,0.9987704721432535,0.9984430155178265,0.9980891946836349,0.9977504888287282,0.9974149082583612,0.9970772114364663,0.9968759653705598,0.9971321673593317,0.9975465993444885,0.9979406300727723,0.9983182206275432,0.9987336800824734,0.9991587402036113,0.9995574952336542 },
						 yScale = { 0.9398609980336684,0.8801764951775201,0.8205087224117156,0.7608322220656681,0.7011857783511769,0.641556965607634,0.582202751099209,0.6415313964664313,0.7011762209786808,0.760820566095213,0.8204720076669474,0.880123840120183,0.939787006949345,0.9995573558228145,0.9472447291016151,0.8950304920640859,0.8428309213531858,0.7906425039058027,0.7384682835024293,0.686253715297549,0.6340971996309089,0.582202751099209,0.6415418382249647,0.7011857783511769,0.7608335561630836,0.8204934965000291,0.8801605834567293,0.9398613318481763,0.9995574952336542 },
						 rotation = { -0.2946319580078125,-0.77630615234375,-1.2578582763671875,-1.55230712890625,-2.035308837890625,-2.5171356201171875,-2.9951171875,-2.76751708984375,-2.5345916748046875,-2.3007049560546875,-2.2561798095703125,-2.0248260498046875,-1.7907867431640625,-1.7340087890625,-1.7855377197265625,-2.0134735107421875,-2.0518951416015625,-2.279754638671875,-2.5066680908203125,-2.5467987060546875,-2.771881103515625,-2.9951171875,-2.5171356201171875,-2.0344390869140625,-1.553192138671875,-1.2587432861328125,-0.77630615234375,-0.2946319580078125,-0.0008697509765625 },
						 },{
						 --rarm
						 path = "assets/flyingGirls/Black/arm.png",
						 x = { 283.85,284.4,285,285.35,285.9,286.4,286.95,287.45,287.85,288.4,288.85,289.2,289.7,290.1,289.75,289.3,288.9,288.45,288,287.6,287.15,286.7,286.25,285.75,285.3,284.75,284.3,283.8,283.3 },
						 y = { 384.45,380.2,375.9,371.6,367.35,363,358.7,354.45,350.1,345.75,341.4,337,332.6,328.25,332.35,336.45,340.45,344.55,348.6,352.7,356.75,360.75,364.75,368.8,372.75,376.8,380.8,384.7,388.7 },
						 rotation = { -28.048309326171875,-29.262710571289063,-30.476226806640625,-31.691253662109375,-32.906097412109375,-34.12086486816406,-35.33544921875,-36.549591064453125,-37.76499938964844,-38.97822570800781,-40.193145751953125,-41.40843200683594,-42.62355041503906,-43.83625793457031,-42.70391845703125,-41.57032775878906,-40.4371337890625,-39.30218505859375,-38.16871643066406,-37.03509521484375,-35.901611328125,-34.76951599121094,-33.63456726074219,-32.50248718261719,-31.36859130859375,-30.234054565429688,-29.10009765625,-27.96856689453125,-26.833694458007813 },
						 },{
						 --rforearm
						 path = "assets/flyingGirls/Black/forearm.png",
						 x = { 306.65,308,309.45,310.85,312.2,313.55,314.9,316.2,317.55,318.75,320,321.2,322.4,323.6,322.5,321.4,320.25,319.1,317.9,316.75,315.55,314.25,313.05,311.75,310.5,309.25,307.9,306.55,305.2 },
						 y = { 428.1,423.35,418.6,413.75,409,404.2,399.3,394.4,389.45,384.5,379.55,374.5,369.55,364.4,369.15,373.85,378.55,383.2,387.8,392.4,396.95,401.5,406.1,410.6,415.15,419.55,423.95,428.35,432.75 },
						 rotation = { -27.79986572265625,-28.767959594726563,-29.7342529296875,-30.700393676757813,-31.667190551757813,-32.63475036621094,-33.601837158203125,-34.56904602050781,-35.535675048828125,-36.50160217285156,-37.46879577636719,-38.435211181640625,-39.40202331542969,-40.368682861328125,-39.46722412109375,-38.564788818359375,-37.66160583496094,-36.76002502441406,-35.85798645019531,-34.95375061035156,-34.05250549316406,-33.15068054199219,-32.2474365234375,-31.34564208984375,-30.441802978515625,-29.540740966796875,-28.639495849609375,-27.736892700195313,-26.833694458007813 },
						 },{
						 --rhand
						 path = "assets/flyingGirls/Black/hand.png",
						 x = { 340.65,342.5,344.2,345.95,347.65,349.35,351,352.55,354.15,355.65,357.15,358.65,360.1,361.45,360.2,358.9,357.5,356.1,354.65,353.2,351.75,350.25,348.65,347.15,345.5,343.9,342.2,340.5,338.8 },
						 y = { 449.1,443.7,438.3,432.85,427.4,421.85,416.3,410.7,405.05,399.4,393.75,388,382.2,376.45,381.9,387.15,392.6,397.9,403.25,408.45,413.7,418.9,424.1,429.2,434.3,439.4,444.45,449.5,454.45 },
						 rotation = { -28.151031494140625,-29.469223022460938,-30.788223266601563,-32.10400390625,-33.42193603515625,-34.74000549316406,-36.05790710449219,-37.37615966796875,-38.69337463378906,-40.01155090332031,-41.328643798828125,-42.64720153808594,-43.965179443359375,-45.283233642578125,-44.054718017578125,-42.8240966796875,-41.59381103515625,-40.363616943359375,-39.13426208496094,-37.904052734375,-36.67182922363281,-35.44352722167969,-34.213043212890625,-32.983062744140625,-31.752609252929688,-30.522308349609375,-29.293975830078125,-28.063278198242188,-26.834381103515625 },
						 },{
						 --head
						 path = "assets/flyingGirls/Black/head.png",
						 x = { 361.15,360.45,359.75,359.05,358.35,357.65,356.9,356.2,355.45,354.7,353.95,353.2,352.45,351.65,352.35,353.1,353.75,354.55,355.2,355.9,356.6,357.3,357.9,358.6,359.25,359.85,360.55,361.1,361.8 },
						 y = { 261.75,256.95,252.2,247.45,242.7,237.95,233.3,228.55,223.75,219,214.3,209.65,204.9,200.3,204.6,209.05,213.4,217.8,222.25,226.6,230.95,235.5,239.85,244.3,248.85,253.15,257.6,262.1,266.5 },
						 rotation = { -76.7994384765625,-77.26603698730469,-77.73101806640625,-78.19680786132813,-78.663330078125,-79.12887573242188,-79.59501647949219,-80.05915832519531,-80.52633666992188,-80.99221801757813,-81.45675659179688,-81.92240905761719,-82.38743591308594,-82.85346984863281,-82.42007446289063,-81.984130859375,-81.54910278320313,-81.11506652832031,-80.68035888671875,-80.24588012695313,-79.81167602539063,-79.37527465820313,-78.94180297851563,-78.5079345703125,-78.07205200195313,-77.63838195800781,-77.20449829101563,-76.76878356933594,-76.33380126953125 },
						 },{
						 displayObject = blackClosedEyes,
						 x = { 361.15,360.45,359.75,359.05,358.35,357.65,356.9,356.2,355.45,354.7,353.95,353.2,352.45,351.65,352.35,353.1,353.75,354.55,355.2,355.9,356.6,357.3,357.9,358.6,359.25,359.85,360.55,361.1,361.8 },
						 y = { 261.75,256.95,252.2,247.45,242.7,237.95,233.3,228.55,223.75,219,214.3,209.65,204.9,200.3,204.6,209.05,213.4,217.8,222.25,226.6,230.95,235.5,239.85,244.3,248.85,253.15,257.6,262.1,266.5 },
						 rotation = { -76.7994384765625,-77.26603698730469,-77.73101806640625,-78.19680786132813,-78.663330078125,-79.12887573242188,-79.59501647949219,-80.05915832519531,-80.52633666992188,-80.99221801757813,-81.45675659179688,-81.92240905761719,-82.38743591308594,-82.85346984863281,-82.42007446289063,-81.984130859375,-81.54910278320313,-81.11506652832031,-80.68035888671875,-80.24588012695313,-79.81167602539063,-79.37527465820313,-78.94180297851563,-78.5079345703125,-78.07205200195313,-77.63838195800781,-77.20449829101563,-76.76878356933594,-76.33380126953125 },
						 scaleComponent = true,
						 },{
						 displayObject = blackOpenEyes,
						 x = { 361.15,360.45,359.75,359.05,358.35,357.65,356.9,356.2,355.45,354.7,353.95,353.2,352.45,351.65,352.35,353.1,353.75,354.55,355.2,355.9,356.6,357.3,357.9,358.6,359.25,359.85,360.55,361.1,361.8 },
						 y = { 261.75,256.95,252.2,247.45,242.7,237.95,233.3,228.55,223.75,219,214.3,209.65,204.9,200.3,204.6,209.05,213.4,217.8,222.25,226.6,230.95,235.5,239.85,244.3,248.85,253.15,257.6,262.1,266.5 },
						 rotation = { -76.7994384765625,-77.26603698730469,-77.73101806640625,-78.19680786132813,-78.663330078125,-79.12887573242188,-79.59501647949219,-80.05915832519531,-80.52633666992188,-80.99221801757813,-81.45675659179688,-81.92240905761719,-82.38743591308594,-82.85346984863281,-82.42007446289063,-81.984130859375,-81.54910278320313,-81.11506652832031,-80.68035888671875,-80.24588012695313,-79.81167602539063,-79.37527465820313,-78.94180297851563,-78.5079345703125,-78.07205200195313,-77.63838195800781,-77.20449829101563,-76.76878356933594,-76.33380126953125 },
						 scaleComponent = true,
						 },
						},
						 x = 0,
						 y = 0,
						 scale = 0.5,
						 speed = 0.5
						}
	local blueAnimation = ui.newAnimation{
						 comps = {
						 {
						 --larm
						 path = "assets/flyingGirls/Blue/arm.png",
						 x = { 341.75,342.25,342.75,343.2,343.65,344.05,344.45,344.85,345.2,345.55,345.9,346.2,346.5,346.8,346.5,346.25,345.95,345.65,345.35,345,344.65,344.3,343.9,343.5,343.1,342.65,342.2,341.75,341.25 },
						 y = { 397.55,392.6,387.65,382.65,377.7,372.7,367.75,362.75,357.75,352.75,347.75,342.75,337.75,332.75,337.45,342.1,346.75,351.45,356.1,360.75,365.4,370.05,374.7,379.35,384,388.65,393.25,397.9,402.5 },
						 rotation = { -60.54005432128906,-60.54005432128906,-60.54005432128906,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54005432128906,-60.54005432128906,-60.54005432128906,-60.54005432128906 },
						 xOffset = -25,
						 yOffset = -15
						 },{
						 --lforearm
						 path = "assets/flyingGirls/Blue/forearm.png",
						 x = { 341.75,342.25,342.75,343.2,343.65,344.05,344.45,344.85,345.2,345.55,345.9,346.2,346.5,346.8,346.5,346.25,345.95,345.65,345.35,345,344.65,344.3,343.9,343.5,343.1,342.65,342.2,341.75,341.25 },
						 y = { 397.55,392.6,387.65,382.65,377.7,372.7,367.75,362.75,357.75,352.75,347.75,342.75,337.75,332.75,337.45,342.1,346.75,351.45,356.1,360.75,365.4,370.05,374.7,379.35,384,388.65,393.25,397.9,402.5 },
						 rotation = { -60.54005432128906,-60.54005432128906,-60.54005432128906,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54072570800781,-60.54005432128906,-60.54005432128906,-60.54005432128906,-60.54005432128906 },
						 },{
						 --lhand
						 path = "assets/flyingGirls/Blue/hand.png",
						 x = { 383.3,383.95,384.5,385.05,385.5,386,386.5,386.95,387.4,387.8,388.2,388.6,388.95,389.25,388.95,388.7,388.25,387.9,387.55,387.15,386.75,386.3,385.8,385.35,384.9,384.4,383.75,383.25,382.7 },
						 y = { 397.65,392.95,388.15,383.4,378.7,373.95,369.2,364.4,359.65,354.9,350.15,345.35,340.6,335.85,340.3,344.8,349.15,353.65,358.1,362.6,366.95,371.45,375.85,380.3,384.7,389.1,393.5,397.9,402.4 },
						 rotation = { -63.64234924316406,-62.80894470214844,-61.97554016113281,-61.1407470703125,-60.30596923828125,-59.472503662109375,-58.63714599609375,-57.803863525390625,-56.96958923339844,-56.13514709472656,-55.30134582519531,-54.465484619140625,-53.631378173828125,-52.79759216308594,-53.57643127441406,-54.35505676269531,-55.133270263671875,-55.91090393066406,-56.68965148925781,-57.47077941894531,-58.24864196777344,-59.02696228027344,-59.80577087402344,-60.583160400390625,-61.362518310546875,-62.13996887207031,-62.91972351074219,-63.69853210449219,-64.47584533691406 },
						 },{
						 --lknee
						 path = "assets/flyingGirls/Blue/knee.png",
						 x = { 83.5,82.9,82.4,82.3,82.5,82.95,83.65,84.6,85.85,87.35,89.1,91.15,93.35,95.95,93.6,91.4,89.5,87.8,86.25,85.05,84.1,83.2,82.7,82.45,82.35,82.45,82.95,83.5,84.35 },
						 y = { 377.3,369,360.7,352.35,343.95,335.55,327.1,318.75,310.45,302.1,293.9,285.8,277.8,269.85,277.25,284.75,292.25,299.9,307.65,315.4,323.25,331.05,338.9,346.7,354.5,362.35,370.05,377.9,385.55 },
						 rotation = { -3.1808013916015625,-0.493072509765625,2.1924591064453125,4.88140869140625,7.567901611328125,10.256912231445313,12.941741943359375,15.630828857421875,18.318939208984375,21.004638671875,23.69317626953125,26.379409790039063,29.06671142578125,31.7545166015625,29.248062133789063,26.738250732421875,24.229782104492188,21.721160888671875,19.2139892578125,16.706619262695313,14.197402954101563,11.689224243164063,9.181671142578125,6.6726531982421875,4.164642333984375,1.6571502685546875,-0.8506011962890625,-3.3603057861328125,-5.8675689697265625 },
						 },{
						 --lhip
						 path = "assets/flyingGirls/Blue/hip.png",
						 x = { 149.1,149.15,149.15,149.25,149.45,149.75,150.15,150.6,151.05,151.7,152.35,153.15,154,154.9,154.1,153.25,152.55,151.95,151.3,150.85,150.4,149.95,149.7,149.45,149.2,149.1,149.15,149.1,149.25 },
						 y = { 370.8,365.9,361,356.2,351.3,346.4,341.6,336.75,332,327.2,322.45,317.8,313,308.4,312.8,317.1,321.45,325.95,330.35,334.85,339.35,343.8,348.35,352.9,357.45,362.05,366.55,371.1,375.65 },
						 rotation = { -19.113372802734375,-16.102432250976563,-13.092788696289063,-10.080734252929688,-7.069915771484375,-4.0576629638671875,-1.045501708984375,1.9654541015625,4.97686767578125,7.987579345703125,11.000076293945313,14.011550903320313,17.02288818359375,20.033843994140625,17.221710205078125,14.4124755859375,11.603683471679688,8.791885375976563,5.9808807373046875,3.1685943603515625,0.35931396484375,-2.4508209228515625,-5.26220703125,-8.07244873046875,-10.8829345703125,-13.692611694335938,-16.504302978515625,-19.314498901367188,-22.125946044921875 },
						 },{
						 --lfoot
						 path = "assets/flyingGirls/Blue/foot.png",
						 x = { 36.6,35.9,35.55,35.65,36.05,36.85,37.95,39.45,41.25,43.4,45.85,48.75,51.9,55.4,52.15,49.1,46.4,44.05,41.9,40.1,38.6,37.35,36.5,35.9,35.6,35.65,36,36.6,37.55 },
						 y = { 385.5,375.15,364.8,354.4,344,333.65,323.3,313.1,302.85,292.8,282.85,272.9,263.25,253.7,262.55,271.6,280.85,290.1,299.5,308.95,318.5,328.15,337.85,347.4,357.15,366.9,376.5,386.2,395.75 },
						 rotation = { 28.20538330078125,30.133453369140625,32.06195068359375,33.99125671386719,35.9205322265625,37.84904479980469,39.777923583984375,41.707550048828125,43.63587951660156,45.56352233886719,47.4921875,49.42085266113281,51.350860595703125,53.27928161621094,51.47906494140625,49.67854309082031,47.87896728515625,46.079254150390625,44.27873229980469,42.477386474609375,40.67835998535156,38.878753662109375,37.077972412109375,35.27723693847656,33.477325439453125,31.67669677734375,29.877105712890625,28.076217651367188,26.276870727539063 },
						 },{
						 --lwings
						 path = "assets/flyingGirls/Blue/wings.png",
						 x = { 284.45,282.7,281.2,279.8,278.7,277.75,276.4,276.3,276.35,276.6,277.05,277.7,278.45,279.75,278.95,277.95,277.5,276.8,276.5,276.1,276.15,276,276.8,277.8,279.05,280.4,282.15,283.95,286.4 },
						 y = { 261.15,262.5,263.8,265.3,266.7,268.1,269.5,260.4,251.2,242.05,232.7,223.6,214.35,204.85,213.25,221.6,230,238.35,246.65,255.1,263.55,271.8,270,268.25,266.55,264.7,262.85,261.25,259.65 },
						 xScale = { 0.9991587402036113,0.9987489374703642,0.998333140716133,0.9979554697160695,0.9975471411900452,0.9971321673593317,0.9968759653705598,0.9971344888164468,0.9975121443414483,0.9978897660196558,0.9982717021922011,0.9986549288120934,0.999053582662365,0.9995573558228145,0.9991117314412805,0.9987704721432535,0.9984430155178265,0.9980891946836349,0.9977504888287282,0.9974149082583612,0.9970772114364663,0.9968759653705598,0.9971321673593317,0.9975465993444885,0.9979406300727723,0.9983182206275432,0.9987336800824734,0.9991587402036113,0.9995574952336542 },
						 yScale = { 0.9398609980336684,0.8801764951775201,0.8205087224117156,0.7608322220656681,0.7011857783511769,0.641556965607634,0.582202751099209,0.6415313964664313,0.7011762209786808,0.760820566095213,0.8204720076669474,0.880123840120183,0.939787006949345,0.9995573558228145,0.9472447291016151,0.8950304920640859,0.8428309213531858,0.7906425039058027,0.7384682835024293,0.686253715297549,0.6340971996309089,0.582202751099209,0.6415418382249647,0.7011857783511769,0.7608335561630836,0.8204934965000291,0.8801605834567293,0.9398613318481763,0.9995574952336542 },
						 rotation = { -0.2946319580078125,-0.77630615234375,-1.2578582763671875,-1.55230712890625,-2.035308837890625,-2.5171356201171875,-2.9951171875,-2.76751708984375,-2.5345916748046875,-2.3007049560546875,-2.2561798095703125,-2.0248260498046875,-1.7907867431640625,-1.7340087890625,-1.7855377197265625,-2.0134735107421875,-2.0518951416015625,-2.279754638671875,-2.5066680908203125,-2.5467987060546875,-2.771881103515625,-2.9951171875,-2.5171356201171875,-2.0344390869140625,-1.553192138671875,-1.2587432861328125,-0.77630615234375,-0.2946319580078125,-0.0008697509765625 },
						 },{
						 --rknee
						 path = "assets/flyingGirls/Blue/knee.png",
						 x = { 95.25,93.35,91.7,90.2,88.95,88,87.3,86.75,86.55,86.55,86.85,87.3,88.05,89.05,88.1,87.4,86.85,86.65,86.5,86.7,87,87.6,88.35,89.35,90.6,92.05,93.6,95.45,97.45 },
						 y = { 322.1,323.2,324.35,325.6,326.95,328.35,329.75,331.25,332.8,334.3,335.95,337.4,338.9,340.35,338.95,337.6,336.2,334.7,333.35,331.9,330.45,329.1,327.75,326.5,325.3,324.1,323.05,322.05,321.15 },
						 rotation = { 44.67878723144531,41.37348937988281,38.068603515625,34.76478576660156,31.458999633789063,28.155792236328125,24.851211547851563,21.546661376953125,18.24090576171875,14.936920166015625,11.631362915039063,8.325958251953125,5.0211181640625,1.7165374755859375,4.800689697265625,7.886383056640625,10.970596313476563,14.054351806640625,17.1395263671875,20.223434448242188,23.30865478515625,26.392730712890625,29.476516723632813,32.5609130859375,35.64668273925781,38.731170654296875,41.81361389160156,44.89801025390625,47.9844970703125 },
						 },{
						 --rhip
						 path = "assets/flyingGirls/Blue/hip.png",
						 x = { 152.65,152.6,152.65,152.65,152.8,152.95,153.2,153.55,153.95,154.35,154.85,155.45,155.95,156.7,156.05,155.5,154.95,154.45,154.05,153.75,153.4,153.1,152.95,152.75,152.65,152.6,152.6,152.7,152.75 },
						 y = { 357.2,355.15,353.25,351.2,349.25,347.2,345.2,343.15,341.25,339.15,337.05,334.95,332.8,330.7,332.7,334.7,336.6,338.55,340.5,342.4,344.25,346.15,348,349.85,351.75,353.6,355.45,357.3,359.15 },
						 rotation = { 16.017654418945313,13.197235107421875,10.3770751953125,7.555877685546875,4.7364349365234375,1.91741943359375,-0.90216064453125,-3.7226104736328125,-6.542388916015625,-9.362197875976563,-12.181304931640625,-15.00054931640625,-17.821945190429688,-20.641845703125,-18.010330200195313,-15.378372192382813,-12.746444702148438,-10.1146240234375,-7.481109619140625,-4.84930419921875,-2.2186431884765625,0.4126434326171875,3.0448150634765625,5.67718505859375,8.309707641601563,10.941940307617188,13.572891235351563,16.204864501953125,18.836593627929688 },
						 },{
						 --rfoot
						 path = "assets/flyingGirls/Blue/foot.png",
						 x = { 60.3,56.85,53.65,50.85,48.45,46.4,44.9,43.6,42.85,42.35,42.35,42.7,43.45,44.6,43.5,42.75,42.35,42.3,42.6,43.25,44.2,45.55,47.25,49.3,51.55,54.3,57.2,60.55,64.2 },
						 y = { 291.6,294.75,298.1,301.6,305.3,309.15,313,316.95,320.95,325.05,329.15,333.15,337.2,341.15,337.4,333.75,329.9,326.1,322.35,318.6,314.9,311.2,307.6,304.05,300.7,297.4,294.3,291.4,288.55 },
						 rotation = { 78.29148864746094,73.97911071777344,69.66732788085938,65.35646057128906,61.044281005859375,56.7342529296875,52.42121887207031,48.11167907714844,43.79939270019531,39.48649597167969,35.175140380859375,30.8636474609375,26.55316162109375,22.24139404296875,26.266326904296875,30.289505004882813,34.3133544921875,38.33744812011719,42.36207580566406,46.385650634765625,50.4100341796875,54.434234619140625,58.457733154296875,62.48133850097656,66.50578308105469,70.52992248535156,74.55500793457031,78.58015441894531,82.60313415527344 },
						 },{
						 --skirt
						 path = "assets/flyingGirls/Blue/skirt.png",
						 x = { 155.75,155.8,155.75,155.85,155.9,155.95,155.95,156,156.05,156.1,156.2,156.3,156.35,156.4,156.4,156.3,156.25,156.2,156.1,156.05,155.95,155.9,155.85,155.85,155.8,155.75,155.75,155.75,155.7 },
						 y = { 348.1,344.45,340.85,337.3,333.65,330.05,326.4,322.85,319.25,315.65,312.05,308.4,304.85,301.25,304.55,307.9,311.35,314.7,318.05,321.4,324.8,328.1,331.45,334.8,338.25,341.6,344.95,348.35,351.75 },
						 rotation = { -0.8864288330078125,-0.4546051025390625,-0.022735595703125,0.4082794189453125,0.8401031494140625,1.2718505859375,1.7034454345703125,2.135711669921875,2.566864013671875,2.9986114501953125,3.4300079345703125,3.8618927001953125,4.2950592041015625,4.7268829345703125,4.3237457275390625,3.920196533203125,3.5171051025390625,3.1145477294921875,2.7116851806640625,2.3094329833984375,1.904327392578125,1.500762939453125,1.09881591796875,0.6958770751953125,0.2937469482421875,-0.109283447265625,-0.512298583984375,-0.915283203125,-1.3199005126953125 },
						 },{
						 --body
						 path = "assets/flyingGirls/Blue/body.png",
						 x = { 208.55,208.35,208.2,208.1,207.9,207.8,207.7,207.55,207.35,207.25,207.1,206.95,206.8,206.7,206.85,206.95,207.1,207.2,207.35,207.45,207.6,207.75,207.9,208,208.15,208.3,208.4,208.55,208.7 },
						 y = { 345.4,341.8,338.2,334.6,331.05,327.45,323.85,320.35,316.7,313.1,309.55,306,302.4,298.8,302.1,305.5,308.85,312.2,315.5,318.8,322.2,325.55,328.9,332.25,335.6,338.9,342.25,345.65,349 },
						 rotation = { -0.4755859375,-0.9502410888671875,-1.425628662109375,-1.8999481201171875,-2.3740234375,-2.8495025634765625,-3.3245849609375,-3.7983551025390625,-4.274200439453125,-4.74859619140625,-5.22320556640625,-5.6979522705078125,-6.17279052734375,-6.6467742919921875,-6.2039031982421875,-5.7620086669921875,-5.31768798828125,-4.8744659423828125,-4.4315338134765625,-3.9889373779296875,-3.54498291015625,-3.1032257080078125,-2.6593475341796875,-2.216033935546875,-1.7733154296875,-1.3295135498046875,-0.8864288330078125,-0.4432373046875,0 },
						 xOffset = 33,
						 yOffset = 13,
						 },{
						 --rwings
						 path = "assets/flyingGirls/Blue/wings.png",
						 x = { 287.05,285.3,283.75,282.35,281.15,280.1,279.1,279.1,279.2,279.6,280,280.65,281.4,282.45,281.6,280.65,280.2,279.5,279.2,278.8,278.85,278.7,279.5,280.55,281.8,283.15,284.9,286.65,289.1 },
						 y = { 262.9,264.3,265.6,267.2,268.55,270,271.3,262.1,252.9,243.8,234.45,225.25,216.15,206.65,215,223.45,231.8,240.1,248.4,256.95,265.2,273.6,271.9,270.15,268.35,266.5,264.75,263.1,261.45 },
						 xScale = { 0.9991587402036113,0.9987489374703642,0.998333140716133,0.9979554697160695,0.9975471411900452,0.9971321673593317,0.9968759653705598,0.9971344888164468,0.9975121443414483,0.9978897660196558,0.9982717021922011,0.9986549288120934,0.999053582662365,0.9995573558228145,0.9991117314412805,0.9987704721432535,0.9984430155178265,0.9980891946836349,0.9977504888287282,0.9974149082583612,0.9970772114364663,0.9968759653705598,0.9971321673593317,0.9975465993444885,0.9979406300727723,0.9983182206275432,0.9987336800824734,0.9991587402036113,0.9995574952336542 },
						 yScale = { 0.9398609980336684,0.8801764951775201,0.8205087224117156,0.7608322220656681,0.7011857783511769,0.641556965607634,0.582202751099209,0.6415313964664313,0.7011762209786808,0.760820566095213,0.8204720076669474,0.880123840120183,0.939787006949345,0.9995573558228145,0.9472447291016151,0.8950304920640859,0.8428309213531858,0.7906425039058027,0.7384682835024293,0.686253715297549,0.6340971996309089,0.582202751099209,0.6415418382249647,0.7011857783511769,0.7608335561630836,0.8204934965000291,0.8801605834567293,0.9398613318481763,0.9995574952336542 },
						 rotation = { -0.2946319580078125,-0.77630615234375,-1.2578582763671875,-1.55230712890625,-2.035308837890625,-2.5171356201171875,-2.9951171875,-2.76751708984375,-2.5345916748046875,-2.3007049560546875,-2.2561798095703125,-2.0248260498046875,-1.7907867431640625,-1.7340087890625,-1.7855377197265625,-2.0134735107421875,-2.0518951416015625,-2.279754638671875,-2.5066680908203125,-2.5467987060546875,-2.771881103515625,-2.9951171875,-2.5171356201171875,-2.0344390869140625,-1.553192138671875,-1.2587432861328125,-0.77630615234375,-0.2946319580078125,-0.0008697509765625 },
						 },{
						 --rarm
						 path = "assets/flyingGirls/Blue/arm.png",
						 x = { 292.95,293.15,293.4,293.65,293.85,294,294.25,294.45,294.65,294.8,295.05,295.15,295.4,295.5,295.3,295.25,295.1,294.85,294.65,294.5,294.35,294.15,293.9,293.8,293.6,293.35,293.15,292.95,292.75 },
						 y = { 380.75,376.4,372.15,367.85,363.5,359.15,354.85,350.5,346.2,341.9,337.55,333.2,328.9,324.5,328.6,332.7,336.7,340.7,344.75,348.8,352.8,356.85,360.9,364.95,368.95,372.9,377,381.05,385.1 },
						 rotation = { -48.82554626464844,-49.473846435546875,-50.12359619140625,-50.773284912109375,-51.42237854003906,-52.07037353515625,-52.7216796875,-53.370941162109375,-54.01988220214844,-54.66862487792969,-55.31907653808594,-55.969696044921875,-56.61767578125,-57.26615905761719,-56.66096496582031,-56.0550537109375,-55.4493408203125,-54.841796875,-54.236297607421875,-53.629669189453125,-53.02400207519531,-52.41847229003906,-51.81292724609375,-51.20452880859375,-50.600067138671875,-49.99357604980469,-49.38909912109375,-48.78147888183594,-48.17425537109375 },
						 },{
						 --rforearm
						 path = "assets/flyingGirls/Blue/forearm.png",
						 x = { 333.1,333.35,333.6,333.85,334,334.2,334.4,334.55,334.75,334.95,335.05,335.1,335.3,335.4,335.3,335.2,335.05,334.95,334.8,334.6,334.55,334.25,334.1,333.95,333.7,333.45,333.3,333.05,332.85 },
						 y = { 411.25,406.8,402.4,398.05,393.65,389.25,384.75,380.45,376.05,371.65,367.2,362.75,358.3,353.9,358.05,362.15,366.35,370.35,374.6,378.65,382.8,386.9,391.05,395.15,399.2,403.3,407.4,411.5,415.6 },
						 rotation = { -54.61395263671875,-53.867889404296875,-53.12400817871094,-52.37841796875,-51.63298034667969,-50.88836669921875,-50.1436767578125,-49.39765930175781,-48.65065002441406,-47.90544128417969,-47.16038513183594,-46.41453552246094,-45.66978454589844,-44.925628662109375,-45.62107849121094,-46.3165283203125,-47.01171875,-47.70770263671875,-48.40325927734375,-49.097625732421875,-49.79359436035156,-50.491119384765625,-51.18646240234375,-51.88157653808594,-52.576385498046875,-53.273101806640625,-53.968963623046875,-54.66455078125,-55.35870361328125 },
						 },{
						 --rhand
						 path = "assets/flyingGirls/Blue/hand.png",
						 x = { 372.85,373,373.2,373.35,373.5,373.6,373.75,373.8,373.9,373.95,374,374.05,374,374.05,374,374.05,374,374,373.95,373.8,373.75,373.7,373.5,373.45,373.3,373.15,373,372.8,372.6 },
						 y = { 415.25,411.25,407.2,403.25,399.2,395.25,391.3,387.2,383.2,379.2,375.15,371.15,367.15,363,366.85,370.65,374.3,378.05,381.85,385.65,389.35,393.1,396.8,400.6,404.35,408,411.8,415.5,419.25 },
						 rotation = { -53.307373046875,-53.040740966796875,-52.77485656738281,-52.50697326660156,-52.24046325683594,-51.97367858886719,-51.70721435546875,-51.4405517578125,-51.17320251464844,-50.9078369140625,-50.64080810546875,-50.374237060546875,-50.10711669921875,-49.83952331542969,-50.09014892578125,-50.33845520019531,-50.587005615234375,-50.83628845214844,-51.08470153808594,-51.332733154296875,-51.58357238769531,-51.832366943359375,-52.08070373535156,-52.32908630371094,-52.577484130859375,-52.826995849609375,-53.07704162597656,-53.325927734375,-53.57417297363281 },
						 },{
						 --head
						 path = "assets/flyingGirls/Blue/head.png",
						 x = { 361.1,360.45,359.7,359,358.3,357.6,356.85,356.1,355.35,354.6,353.85,353.05,352.3,351.55,352.25,353,353.7,354.4,355.1,355.85,356.55,357.25,357.8,358.55,359.25,359.85,360.5,361.15,361.85 },
						 y = { 261.75,257,252.35,247.6,242.9,238.2,233.5,228.8,224.1,219.35,214.7,210.05,205.3,200.65,205.05,209.45,213.75,218.1,222.5,226.85,231.25,235.65,240,244.45,248.8,253.3,257.65,262.1,266.5 },
						 rotation = { -76.7994384765625,-77.26437377929688,-77.73017883300781,-78.19596862792969,-78.66165161132813,-79.12550354003906,-79.59332275390625,-80.05746459960938,-80.52462768554688,-80.99137878417969,-81.45504760742188,-81.92240905761719,-82.38658142089844,-82.85346984863281,-82.41835021972656,-81.984130859375,-81.54824829101563,-81.11506652832031,-80.68035888671875,-80.24588012695313,-79.80998229980469,-79.37527465820313,-78.94012451171875,-78.50625610351563,-78.07121276855469,-77.63587951660156,-77.20283508300781,-76.76713562011719,-76.3321533203125 },
						 },{
						 displayObject = blueClosedEyes,
						 x = { 361.1,360.45,359.7,359,358.3,357.6,356.85,356.1,355.35,354.6,353.85,353.05,352.3,351.55,352.25,353,353.7,354.4,355.1,355.85,356.55,357.25,357.8,358.55,359.25,359.85,360.5,361.15,361.85 },
						 y = { 261.75,257,252.35,247.6,242.9,238.2,233.5,228.8,224.1,219.35,214.7,210.05,205.3,200.65,205.05,209.45,213.75,218.1,222.5,226.85,231.25,235.65,240,244.45,248.8,253.3,257.65,262.1,266.5 },
						 rotation = { -76.7994384765625,-77.26437377929688,-77.73017883300781,-78.19596862792969,-78.66165161132813,-79.12550354003906,-79.59332275390625,-80.05746459960938,-80.52462768554688,-80.99137878417969,-81.45504760742188,-81.92240905761719,-82.38658142089844,-82.85346984863281,-82.41835021972656,-81.984130859375,-81.54824829101563,-81.11506652832031,-80.68035888671875,-80.24588012695313,-79.80998229980469,-79.37527465820313,-78.94012451171875,-78.50625610351563,-78.07121276855469,-77.63587951660156,-77.20283508300781,-76.76713562011719,-76.3321533203125 },
						 scaleComponent = true,
						 },{
						 displayObject = blueOpenEyes,
						 x = { 361.1,360.45,359.7,359,358.3,357.6,356.85,356.1,355.35,354.6,353.85,353.05,352.3,351.55,352.25,353,353.7,354.4,355.1,355.85,356.55,357.25,357.8,358.55,359.25,359.85,360.5,361.15,361.85 },
						 y = { 261.75,257,252.35,247.6,242.9,238.2,233.5,228.8,224.1,219.35,214.7,210.05,205.3,200.65,205.05,209.45,213.75,218.1,222.5,226.85,231.25,235.65,240,244.45,248.8,253.3,257.65,262.1,266.5 },
						 rotation = { -76.7994384765625,-77.26437377929688,-77.73017883300781,-78.19596862792969,-78.66165161132813,-79.12550354003906,-79.59332275390625,-80.05746459960938,-80.52462768554688,-80.99137878417969,-81.45504760742188,-81.92240905761719,-82.38658142089844,-82.85346984863281,-82.41835021972656,-81.984130859375,-81.54824829101563,-81.11506652832031,-80.68035888671875,-80.24588012695313,-79.80998229980469,-79.37527465820313,-78.94012451171875,-78.50625610351563,-78.07121276855469,-77.63587951660156,-77.20283508300781,-76.76713562011719,-76.3321533203125 },
						 scaleComponent = true,
						 },
						},
						 x = 0,
						 y = 0,
						 scale = 0.5,
						 speed = 0.5
						}
	
	blackAnimation.hide()
	blackAnimation.displayObject:setReferencePoint(display.CenterReferencePoint)
	blackAnimation.displayObject.x = width/6
	blackAnimation.displayObject.y = width/5 + 20
	blackAnimation.displayObject.xScale,blackAnimation.displayObject.yScale = 0.5,0.5
	blackAnimation.goToFrame(10)
	
	blueAnimation.hide()
	blueAnimation.displayObject:setReferencePoint(display.CenterReferencePoint)
	blueAnimation.displayObject.x = 4*width/5
	blueAnimation.displayObject.y = width/4 + 30
	blueAnimation.displayObject.xScale,blueAnimation.displayObject.yScale = 0.6,0.6
	blueAnimation.goToFrame(50)
	
	localGroup:insert(blackAnimation.displayObject)
	localGroup:insert(blueAnimation.displayObject)
	localGroup:insert(maryContainerGroup)
	
	local colors = {{193,39,45,255},
					{164,236,255,255},
					{140,198,63,255},
					{247,147,30,255}}
	local actionFunction = nil
	
	local actionsGroup = display.newGroup()
	localGroup:insert(actionsGroup)
	local actionsList = {}
	
	local prevTime = 0
	
	local isDemo = true
	local letActionPass
	
	local lastChances = 0
	
	local function killPassedActions()
		for i=1,#actionsList do
			if actionsList[i] then
				if actionsList[i].displayObject.killMe then
					actionsGroup:remove(actionsList[i].displayObject)
					actionsList[i] = nil
					i = i-1
					if i<=0 then
						i = 1
					end
				end
			end
		end
	end
	
	local function clearActionsList()
		for i=1,#actionsList do
			if (actionsList[i]) then
				actionsGroup:remove(actionsList[i].displayObject)
				actionsList[i]=nil
				i=i-1
			end
		end
		actionsList = {}
	end
	
	local function animateBackground()
		if not background then
			Runtime:removeEventListener("enterFrame",animateBackground)
			return
		end
		
		if paused then
			return
		end
		
		local curTime = system.getTimer()
		local dt = curTime - prevTime
		if dt > 66 then
			dt = 1
		end
		
		local fps = 1000/dt
		prevTime = curTime;
		
		local thisSpeed = speed
		if thisSpeed<0.1 then thisSpeed=0.1 end
		if (thisSpeed > normalSpeed) then
			thisSpeed = (thisSpeed - normalSpeed) ^ 0.5 + normalSpeed
		end
		if finishFlag then
			finishFlag.x = finishFlag.x - thisSpeed*2 * 60/fps
		end
		background.x = background.x - thisSpeed*2 * 60/fps
		
		while background.x <= -(background.contentWidth/2) do
			background.x = background.contentWidth/2+background.x
		end
		while background.x >= 0 do
			background.x = -background.contentWidth/2+background.x
		end
		
		for i=1,actionsGroup.numChildren do
			if actionsGroup[i].x < display.screenOriginX - 50 then
				actionsGroup[i].killMe = true
			else
				local progress = (actionsGroup[i].x-display.screenOriginX)/(display.viewableContentWidth)
				if progress<0 then progress=0 end
				if progress>1 then progress=1 end
				
				if isDemo then
					actionsGroup[i].x = actionsGroup[i].x - 0.2*dt
				else
					actionsGroup[i].x = actionsGroup[i].x - 0.2*dt*(1+(0.2*(difficultyLevel-1)))
				end
				local newAlpha = (1-math.abs((progress-0.5)*2))*2
				if newAlpha<0 then newAlpha=0 end
				if newAlpha>1 then newAlpha=1 end
				newAlpha = newAlpha^0.75
				if actionsGroup[i].touched and actionsGroup[i].clickable then
					actionsGroup[i].clickable = false
				elseif actionsGroup[i].x>=display.screenOriginX then
					actionsGroup[i].clickable = true
				else
					if actionsGroup[i].clickable then
						if letActionPass then
							letActionPass(actionsGroup[i].x,actionsGroup[i].y)
						end
					end
					actionsGroup[i].clickable = false
				end
				if actionsGroup[i].clickable and not actionsGroup[i].touched then
					actionsGroup[i].alpha = newAlpha
				end
			end
		end
		killPassedActions()
	end
	
	local function newAction(demo)
		local index = #actionsList+1
		actionsList[index] = {}
		
		local colorIndex = math.random(#colors)
		actionsList[index].displayObject = display.newGroup()
		local image = display.newImage("assets/b"..colorIndex..".png")
		image:setReferencePoint(display.CenterReferencePoint)
		image.x,image.y=0,0
		image.xScale,image.yScale = 0.45,0.45
		
		local box = display.newRect(0,0,80,80)
		box:setReferencePoint(display.CenterReferencePoint)
		box.x,box.y=0,0
		box:setFillColor(0,0,0,1)
		box.isVisible=true
		
		local circle = display.newCircle(0,0,30)
		circle:setReferencePoint(display.CenterReferencePoint)
		circle.x,circle.y=0,0
		circle:setFillColor(0,0,0,0)
		circle:setStrokeColor(colors[colorIndex][1],colors[colorIndex][2],colors[colorIndex][3],colors[colorIndex][4])
		circle.strokeWidth = 3
		circle.isVisible=false
		
		actionsList[index].displayObject:insert(box,false)
		actionsList[index].displayObject:insert(circle,false)
		actionsList[index].displayObject:insert(image,false)
		math.randomseed( os.time() )
		--math.randomseed( system.getTimer() )
		actionsList[index].displayObject.x = (display.viewableContentWidth)+display.screenOriginX
		if isDemo then
			actionsList[index].displayObject.y = display.screenOriginY+display.viewableContentHeight-50 - math.random()*30 - math.sin(math.random()*3.14159265*2) * 30
			actionsList[index].displayObject.y = actionsList[index].displayObject.y - 95
		else
			actionsList[index].displayObject.y = display.screenOriginY+display.viewableContentHeight-50 - (display.contentHeight-120)/2 + math.sin(math.random()*3.14159265*2) * math.random((display.contentHeight-120)/2)
			--actionsList[index].displayObject.y = display.screenOriginY+display.viewableContentHeight-50 - math.random()*60 - math.sin(math.random()*3.14159265*2) * 60
		end
		--actionsList[index].displayObject.y = display.screenOriginY+display.viewableContentHeight-30 - math.random()*80
		actionsList[index].displayObject.index = colorIndex
		actionsList[index].displayObject.alpha = 0
		actionsList[index].displayObject.touched = false
		actionsList[index].displayObject:setReferencePoint(display.CenterReferencePoint)
		actionsGroup:insert(actionsList[index].displayObject)
		
		actionsList[index].displayObject.touchIt = function()
			soundController.playNew{
					path = "assets/sound/effects/tapclicksound.mp3",
					actionTimes = nil,
					action =	nil,
					onComplete = nil
					}
			
			actionsList[index].displayObject.touched = true
			circle.isVisible = true
			transition.to(actionsList[index].displayObject,{alpha=0,time=600})
		end
		
		if demo then
			return
		end
		
		local function touchEvent(event)
			if event.phase == "began" then
				if actionFunction then
					if type(actionFunction) == "function" then
						if actionFunction(actionsList[index]) then
							actionsList[index].displayObject.touched = true
							circle.isVisible = true
							transition.to(actionsList[index].displayObject,{alpha=0,time=600})
							--POINTS FOR CLICKING IT JUST BEFORE IT PASSES
							if actionsList[index].displayObject.x < display.screenOriginX + display.viewableContentWidth * 0.15 then
								lastChances = lastChances + 1
								
								if lastChances == 10 then
									addExtras("10 Last Chances!!",1+difficultyLevel*4.5,event.x,event.y)
								elseif lastChances == 5 then
									unlockAchievement("com.tapmediagroup.MaryTheFairy.adv5Symbols","Adv 4 - 5 symbols at the right","Adventure 4 - symbols at the right")
									addExtras("5 Last Chances!",1+difficultyLevel*1.5,event.x,event.y)
								else
									addExtras("Last Chance",1+difficultyLevel*0.5,event.x,event.y)
								end
							end
						end
					end
				end
			end
		end
		actionsList[index].displayObject:addEventListener("touch",touchEvent)
	end
	
	local finishFlag = nil
	
	--======================================
	-- DEMO LOOP
	--======================================
	local function prepareDemoLoop()
		local hand = display.newImageRect("assets/hand.png",54.4,64)
		localGroup:insert(hand)
		hand.isVisible = false
		hand:setReferencePoint(display.BottomRightReferencePoint)
		
		local whiteSquare = display.newImageRect("assets/pedazoDeMadera.png",width,95.5)
		whiteSquare:setReferencePoint(display.TopLeftReferencePoint)
		whiteSquare.x,whiteSquare.y=0,display.screenOriginY+display.viewableContentHeight-95
		localGroup:insert(whiteSquare)
		whiteSquare.isVisible = false
		
		local startHandAnimation
		local stopHandAnimation
		local killHandAnimation
		
		local multiplier = 1
		local function prepareHandAnimation()
			hand.x = -100
			hand.y = 160
			
			hand:setReferencePoint(display.TopLeftReferencePoint)
			
			local rotationDelta = 10
			local rotationDirection = -rotationDelta
			
			local alive = true
			
			local timeAnimated = 0
			local prTime = 0
			
			local function animateHand(params)
				local c = 1
				if params then if params.newC then c = params.newC end end
				if actionsGroup then
					if actionsGroup[c] then
						if not actionsGroup[c].touched then
							local theX = actionsGroup[c].x-10
							if theX > 330 then
								theX = 240
							end
							hand.x = (hand.x*49 + theX) / 50
							hand.y = (hand.y*49 + actionsGroup[c].y) / 50
							if ( math.abs(math.abs(hand.x) - math.abs(actionsGroup[c].x)) <= 20
								and
								 math.abs(math.abs(hand.y) - math.abs(actionsGroup[c].y)) <= 20
								) then
								actionsGroup[c].touchIt()
							end
						elseif actionsGroup.numChildren == c then
							local theX = actionsGroup[c].x-10
							if theX > 330 then
								theX = -100
							end
							hand.x = (hand.x*49 + theX) / 50
							hand.y = (hand.y*49 + actionsGroup[c].y) / 50
						else
							animateHand({newC = c+1})
						end
					end
				end
			end
			
			local function moveGirls()
				animateHand()
				
				local curTime = system.getTimer()
				local dt = curTime - prevTime
				if dt > 66 then
					dt = 1
				end
				timeAnimated = timeAnimated + dt
				local fps = 1000/dt
				prTime = curTime;
				
				blackAnimation.displayObject.x = blackAnimation.displayObject.x + (math.sin(timeAnimated*2))*3/4
				blueAnimation.displayObject.x = blueAnimation.displayObject.x - (math.sin(timeAnimated)) / 5
			end
			
			startHandAnimation = function ()
				if alive then
					prTime = system.getTimer()
					Runtime:addEventListener("enterFrame",moveGirls)
				end
			end
			
			stopHandAnimation = function ()
				Runtime:removeEventListener("enterFrame",moveGirls)
			end
			
			killHandAnimation = function ()
				alive = false
				stopHandAnimation()
			end
		end
		prepareHandAnimation()
		
		local function continue()
			killHandAnimation()
			
			localGroup:remove(whiteSquare)
			localGroup:remove(hand)
			localGroup:remove(arrows)
			
			continue=nil
			killDemoLoop=nil
		end
		killDemoLoop = function()
			startDemoLoop=nil
			vanish=nil
			continue()
		end
		
		local vanish
		
		--START BUTTON
		local started = false
		local startButtonAction = function ( event )
			if event.phase == "release" and not started then
				soundController.kill("directions")
				vanish()
				started = true
			end
		end
		-- UI ELEMENT
		local startButton = ui.newButton{
						default = "assets/botonAzulGigante.png",
						onEvent = startButtonAction,
						text = "Start",
						size = 112,
						font = mainFont1,
						offset = correctOffset(0),
						emboss = true,
						textColor={66,33,11,255},
						id = "bt01"}
		startButton.xScale,startButton.yScale = 0.4,0.4
		startButton.x=display.screenOriginX+startButton.contentWidth/2+20
		startButton.y=whiteSquare.y+whiteSquare.contentHeight*5/8-2
		startButton.isVisible = false
		localGroup:insert(startButton)
		
		local someInfoText = "Help Mary to win her first race.\nTAP on the symbols that appear to help Mary go faster and faster. Lets go."
		
		local newSequenceTimer = nil
		
		local function callNewSequence()
			newAction()
			newSequenceTimer = timer.performWithDelay(1200,callNewSequence)
		end
		
		local infoDisplayObject = util.wrappedText(someInfoText, 55, 16, mainFont1, {67,34,15,255})
		infoDisplayObject.y=whiteSquare.y+whiteSquare.contentHeight*5/9-infoDisplayObject.contentHeight/2 - 0
		infoDisplayObject.x=startButton.x+startButton.contentWidth/2+20
		infoDisplayObject.isVisible=false
		localGroup:insert(infoDisplayObject)
		
		vanish = function()
			pauseIt=nil
			continueIt=nil
			
			startButton.isVisible = false
			
			if newSequenceTimer then
				timer.cancel(newSequenceTimer)
			end
			newSequenceTimer = nil
			clearActionsList()
			
			transition.to(whiteSquare,{y=height, time = 550})
			transition.to(startButton,{alpha=0,y=startButton.y+whiteSquare.contentHeight,time=550})
			transition.to(infoDisplayObject,{alpha=0,y=infoDisplayObject.y+whiteSquare.contentHeight,time=550})
			
			transition.to(background,{y=0,time = 500})
			transition.to(hand,{alpha=0, time = 300})
			transition.to(arrows,{alpha=0, time = 300})
			
			timer.performWithDelay(1000, startInteraction)
			timer.performWithDelay(1500, continue)
			
			vanish=nil
		end
		
		startDemoLoop = function()
			soundController.playNew{
						path = "assets/sound/effects/cap4/wind.mp3",
						identifier = "wind",
						staticChannel = 2,
						loops = -1,
						actionTimes = nil,
						action =	nil,
						onComplete = nil
						}
			
			background.isVisible = true
			
			hand.isVisible = true
			
			background.alpha = 0
			whiteSquare.alpha = 0
			
			hand.alpha = 0
			
			newSequenceTimer = timer.performWithDelay(1000,callNewSequence)
			
			mary.laughingAnimation.start()
			mary.laughingAnimation.appear(300)
			
			blackAnimation.start()
			blackAnimation.appear(300)
			
			blueAnimation.start()
			blueAnimation.appear(300)
			
			transition.to(background,{alpha=1,time=300})
			transition.to(hand,{alpha=1,time=300})
			
			whiteSquare.isVisible = true
			whiteSquare.alpha = 0
			startButton.isVisible = true
			infoDisplayObject.isVisible = true
			startButton.alpha=0
			infoDisplayObject.alpha=0
			
			transition.to(startButton,{alpha=1,time=300})
			transition.to(infoDisplayObject,{alpha=1,time=300})
			transition.to(whiteSquare,{alpha=1,time=300})
			
			mary.Blinks.openEyes()
			mary.Blinks.startBlinking()
			
			blackBlinks.openEyes()
			blackBlinks.startBlinking()
			
			blueBlinks.openEyes()
			blueBlinks.startBlinking()
			
			prevTime = system.getTimer()
			Runtime:addEventListener("enterFrame",animateBackground)
			
			startHandAnimation()
			
			pauseIt=function()
				if newSequenceTimer then
					timer.pause(newSequenceTimer)
				end
				mary.Blinks.stopBlinking()
				blackBlinks.stopBlinking()
				blueBlinks.stopBlinking()
				
				mary.laughingAnimation.stop()
				blackAnimation.stop()
				blueAnimation.stop()
			end
			
			continueIt=function()
				if newSequenceTimer then
					timer.resume(newSequenceTimer)
				end
				mary.Blinks.startBlinking()
				blackBlinks.startBlinking()
				blueBlinks.startBlinking()
				
				mary.laughingAnimation.start()
				blackAnimation.start()
				blueAnimation.start()
			end
			startDemoLoop=nil
		end
	end
	prepareDemoLoop()
	
	--====================================================================--
	-- INTERACTION
	--====================================================================--
	local function prepareInteraction()
		local finished = false
		local vanish
		
		local blackSpeed = 6
		local blackDistance = 0
		local blueSpeed = 5
		local blueDistance = 0
		
		local prTime = nil
		local lastSymbolTime = nil
		
		local boost = 3
		local brake = 2
		
		local wrongIconArray = nil
		local wrongIconGroup = display.newGroup()
		localGroup:insert(wrongIconGroup)
		
		local timeLimit = (difficultyLevel<=1 and 90) or (difficultyLevel==2 and 60) or (difficultyLevel>=3 and 60)
		local timeLeft = timeLimit
		
		local isCongratulatingPlayer = false
		local function congratulatePlayer(special)
			if not isCongratulatingPlayer then
				isCongratulatingPlayer = true
				local function completeFunction()
					timer.performWithDelay(3000,function() isCongratulatingPlayer = false; end)
				end
				if special then
					soundController.playNew{
									path = "assets/sound/voices/SonidosNarrador/wellDone.mp3",
									onComplete = completeFunction
									}
				else
					soundController.playNew{
									path = "assets/sound/voices/SonidosNarrador/great.mp3",
									onComplete = completeFunction
									}
				end
			end
		end
		
		local isCheeringUpPlayer = false
		local firstCheerUp = true
		local function cheerUpPlayer()
			if not isCheeringUpPlayer then
				isCheeringUpPlayer = true
				local function completeFunction()
					timer.performWithDelay(5000,function() isCheeringUpPlayer = false; end)
				end
				
				if firstCheerUp or math.random(2) == 1 then
					soundController.playNew{
									path = "assets/sound/voices/SonidosNarrador/catchSymbol.mp3",
									onComplete = completeFunction
									}
					firstCheerUp = false
				else
					soundController.playNew{
									path = "assets/sound/voices/SonidosNarrador/comeOn.mp3",
									onComplete = completeFunction
									}
				end
			end
		end
		local function checkPlayerActivity()
			if system.getTimer() - lastSymbolTime > 3000 then
				cheerUpPlayer()
			end
		end
		
		--Contador de smbolos
		local counterCircle = display.newImage("assets/goalCounter.png")
		counterCircle:setReferencePoint(display.CenterReferencePoint)
		counterCircle.x=display.screenOriginX+85
		counterCircle.y=display.screenOriginY+22
        counterCircle.xScale,counterCircle.yScale=0.45,0.45
		counterCircle.isVisible = false
		
		local text1 = display.newImageRect("assets/marysFace.png",40,40)
        text1.x = counterCircle.x - (counterCircle.contentWidth/2)*0.7
        text1.y = retinaConditional(counterCircle.y + 5, counterCircle.y + 10)
        text1.isVisible=false
        
        showPoints = function(value)
        	local newValue = ((value/300) + 0.5)*0.8
        	if newValue<0 then newValue=0 elseif newValue>1 then newValue=1 end
			--text1.text = newValue
			text1.x = counterCircle.x - (counterCircle.contentWidth/2)*0.7 + (counterCircle.contentWidth*0.7*newValue)
	        text1.y = correctOffset(counterCircle.y)
		end
		showPoints(-1000)
        
		local timerCircle = display.newImage("assets/reloj.png")
		timerCircle:setReferencePoint(display.CenterReferencePoint)
		timerCircle.x = width/2
        timerCircle.y = display.screenOriginY+25
        timerCircle.xScale,timerCircle.yScale=0.45,0.45
		localGroup:insert(timerCircle)
		timerCircle.isVisible = false
		
		local text2size = retinaConditional(28,36)
		local text2 = display.newText("", 0, 0, mainFont1, text2size)
		text2:setReferencePoint(display.CenterReferencePoint)
		--text2.size = text2size
        text2:setTextColor(107,18,22,255)
        text2.x = timerCircle.x+10
        text2.y = timerCircle.y - retinaConditional(3,-2)
        text2.text = ""..timeLeft
        text2.isVisible=false
		
		localGroup:insert(timerCircle)
		localGroup:insert(counterCircle)
		localGroup:insert(text1)
		localGroup:insert(text2)
		
		local countdownTimer = nil
		local function updateTimer()
			if finished then return end
			timeLeft = timeLeft-1
			text2.text = ""..timeLeft
			checkPlayerActivity()
			if timeLeft<=0 then
				finished=true
				if gameOver then gameOver() end
			else
				if timeLeft==5 or timeLeft==13 then
					soundController.playNew{
									path = "assets/sound/voices/SonidosNarrador/hurryUp.mp3",
									}
				end
				if timeLeft<=5 then
					text2:setTextColor(220,55,44,255)
					--text2.size = text2size*1.5
					text2.xScale = 1.25
					text2.yScale = 1.25
				elseif timeLeft<=13 then
					if math.fmod(timeLeft,2) == 1 then
						text2:setTextColor(190,49,40,255)
					else
						text2:setTextColor(107,18,22,255)
					end
					--text2.size = text2size*1.25
					text2.xScale = 1.125
					text2.yScale = 1.125
				end
				countdownTimer = timer.performWithDelay(1000, updateTimer)
			end
		end
		
		local newSequenceTimer = nil
		
		local function callNewSequence()
			if not finished then
				newAction()
				newSequenceTimer = timer.performWithDelay(1200*(1-0.15*(difficultyLevel-1)),callNewSequence)
			end
		end
		
		local errorCount=0
		local interactionLoop
		
		local lastCongrat = 0
		local function correct(actionX,actionY)
			lastSymbolTime = system.getTimer()
			
			local theDiff = difficultyLevel
			if theDiff > 3 then
				theDiff = 3
			end
			if speed<normalSpeed then
				speed = speed + boost / ((1+theDiff*1)/3)
			else
				speed = speed * (1 + (1-(1+theDiff*1)/10)/6 )
			end
			
			if speed > normalSpeed * 10 then
				unlockAchievement("com.tapmediagroup.MaryTheFairy.SpeedOfLight","Speed of light","Speed Of Light!")
				congratulatePlayer(true)
			end
			
			if extras>0 and extras%3 == 0 and extras~=lastCongrat then
				congratulatePlayer()
				lastCongrat=extras
			end
		end
		
		local function incorrect(actionX,actionY)
			if not finished then
				addMisses(1,actionX,actionY)
				speed = speed / (1 + ((1+difficultyLevel*3)/10)/2.5 )
				if speed<0.1 then
					speed = 0.1
				end
			end
		end
		
		interactionLoop = function()
			local curTime = system.getTimer()
			
			if paused then
				local dt = curTime - prTime
				if dt > 66 then
					dt = 1
				end
				dt = dt*0.1
				prTime = curTime;
				return;
			end
			
			speed = (speed*1199 + normalSpeed)/1200
			if speed<0.1 then
				speed = 0.1
			end
			
			if prTime then
				local dt = curTime - prTime
				if dt > 66 then
					dt = 1
				end
				dt = dt*0.1
				prTime = curTime;
				
				blackDistance = blackDistance + blackSpeed*dt - speed*dt
				blueDistance = blueDistance + blueSpeed*dt - speed*dt
				
				if blackDistance>300 then
					blackDistance = 300
				end
				if blueDistance>300 then
					blueDistance = 300
				end
				
				newBlackX = (mary.laughingAnimation.displayObject.x + (blackDistance * 0.7))
				newBlueX = (mary.laughingAnimation.displayObject.x + (blueDistance * 0.75))
				blackAnimation.displayObject.x = (blackAnimation.displayObject.x*99 + newBlackX)/100
				blueAnimation.displayObject.x = (blueAnimation.displayObject.x*99 + newBlueX)/100
				
				local blackRealDistance = (blackAnimation.displayObject.x - mary.laughingAnimation.displayObject.x)/0.7
				local blueRealDistance = (blueAnimation.displayObject.x - mary.laughingAnimation.displayObject.x)/0.75
				
				local maryRealDistance = ((blackRealDistance>blueRealDistance) and blackRealDistance) or blueRealDistance
				local maryDistance = maryRealDistance*-0.5
				maryContainerGroup.x=(maryContainerGroup.x*74+maryDistance)/75
				
				if blackRealDistance<-300 and blueRealDistance<-300 and not finished then
					print(maryRealDistance*-1)
					vanish()
					finished = true
					
					unlockAchievement("com.tapmediagroup.MaryTheFairy.Racer","Racer","Racer")
					if misses == 0 then
						addExtras("No Mistakes", (3^difficultyLevel), width/2, height/2)
						if difficultyLevel == 3 then
							unlockAchievement("com.tapmediagroup.MaryTheFairy.adv4NoMistakesHard","Adv 4 no mistakes - Hard","Catch all the symbols 2.0 - Hard difficulty")
						end
					end
				end
				
				showPoints(maryRealDistance*-1)
			end
			
			local diff = curTime
			blackSpeed = blackSpeed + math.abs(math.sin(diff/1000)/40)
			blueSpeed = blueSpeed + math.abs(math.sin(diff/1000+0.314159265)/45)
		end
		
		local function continue()
			Runtime:removeEventListener("enterFrame",interactionLoop)
			Runtime:removeEventListener("enterFrame",animateBackground)
			if newSequenceTimer then
				timer.cancel(newSequenceTimer)
				newSequenceTimer=nil
			end
			interactionLoop = nil
			callNewSequence = nil
			correct = nil
			incorrect = nil
			
			
			localGroup:remove(background)
			background = nil
			
			mary.laughingAnimation.stop()
			blackAnimation.stop()
			blueAnimation.stop()
			
			mary.laughingAnimation.kill()
			blackAnimation.kill()
			blueAnimation.kill()
			
			continue=nil
			killInteraction=nil
		end
		killInteraction = function()
			startInteraction=nil
			vanish=nil
			continue()
		end
		
		vanish = function ()
			soundController.kill("wind")
			
			finishTime = system.getTimer()
			
			pauseIt=nil
			continueIt=nil
			
			startTheParty()
			timer.performWithDelay(1000, continue)
			
			vanish=nil
		end
		
		startInteraction = function()
			isDemo = false
			startTime = system.getTimer()
			lastSymbolTime = startTime
			letActionPass = function(actionX,actionY)
				incorrect(actionX,actionY)
			end
			
			speed = 5
			Runtime:addEventListener("enterFrame",interactionLoop)
			
			prTime = system.getTimer()
			
			newSequenceTimer = timer.performWithDelay(1000,callNewSequence)
			
			actionFunction = function(action)
				soundController.playNew{
					path = "assets/sound/effects/tapplinsound.mp3",
					actionTimes = nil,
					action =	nil,
					onComplete = nil
					}
				
				if action.displayObject.clickable and not action.displayObject.touched then
					correct(action.displayObject.x,action.displayObject.y)
					return true
				end
				return false
			end
			
			counterCircle.alpha = 0
			counterCircle.isVisible = true
			transition.to(counterCircle,{alpha = 1,time = 300})
			
			text1.alpha = 0
			text1.isVisible = true
			transition.to(text1,{alpha = 1,time = 300})
			
			if timeLimit>0 then
				timerCircle.alpha = 0
				timerCircle.isVisible = true
				transition.to(timerCircle,{alpha = 1,time = 300})
				
				text2.alpha = 0
				text2.isVisible = true
				transition.to(text2,{alpha = 1,time = 300})
				
				countdownTimer = timer.performWithDelay(1000, updateTimer)
			end
			
			local pausedTime = 0
			pauseIt=function()
				pausedTime = system.getTimer()
				if countdownTimer then
					timer.pause(countdownTimer)
				end
				if newSequenceTimer then
					timer.pause(newSequenceTimer)
				end
				mary.Blinks.stopBlinking()
				blackBlinks.stopBlinking()
				blueBlinks.stopBlinking()
				
				mary.laughingAnimation.stop()
				blackAnimation.stop()
				blueAnimation.stop()
				
				if st1 then timer.pause(st1) end
				if st2 then timer.pause(st2) end
				if st3 then timer.pause(st3) end
				if st4 then timer.pause(st4) end
			end
			
			continueIt=function()
				if pausedTime ~= 0 then
					startTime = startTime + (system.getTimer() - pausedTime)
				end
				pausedTime = 0
				if countdownTimer then
					timer.resume(countdownTimer)
				end
				if newSequenceTimer then
					timer.resume(newSequenceTimer)
				end
				mary.Blinks.startBlinking()
				blackBlinks.startBlinking()
				blueBlinks.startBlinking()
				
				mary.laughingAnimation.start()
				blackAnimation.start()
				blueAnimation.start()
				
				if st1 then timer.resume(st1) end
				if st2 then timer.resume(st2) end
				if st3 then timer.resume(st3) end
				if st4 then timer.resume(st4) end
			end
			
			pauseIt()
			continueIt()
			
			startInteraction =nil
		end
	end
	prepareInteraction()
	
	--======================================
	-- PARTY
	--======================================
	local function prepareTheParty()
		local loadingBackground = display.newImageRect("assets/world/silverGardenSky.jpg",width,height)
		loadingBackground:setReferencePoint(display.TopLeftReferencePoint)
		loadingBackground.x = 0
		loadingBackground.y = 0
		localGroup:insert(loadingBackground)
		loadingBackground.isVisible = false
		
		local gPS = require( "gPS" )
		local rdm = math.random
		
		local mGroup = display.newGroup()
		local fGroup = display.newGroup()
		localGroup:insert(mGroup)
		localGroup:insert(fGroup)
		
		local colors = {
						{193,39,45},
						{140,198,63},
						{63,255,63},
						{140,214,234},
						}
		
		local fireIt, explodeIt
		
		---------------------------------------------------------------------------------------------------------
		function fireIt()
			local star1 = { imgStart = { life = rdm(800,1000), alpha = 1, size = {1,1}, stroke={}, pos = {((display.viewableContentWidth-display.screenOriginX)*0.35)+display.screenOriginX+rdm(-50,50),height/2+rdm(-50,50),rdm(-70,70),height},color={0,0,0,255}},
							imgEnd = { onComplete = explodeIt, alpha = 1, scale ={1,1},pos={0,0,0,0,move = 1, ease = easing.outQuad}},
							imgInfo = { group = fGroup, max = 5}}
			gPS.newCircle(star1)
		end
		
		
		---------------------------------------------------------------------------------------------------------
		function explodeIt(params)
			local radius = (rdm()*3+7)*10
			local life = rdm(1000,1200)
			local colorIndex=rdm(1,#colors)
			for a = 1, 50 do
				local angle = rdm()*3.1416*2
				local radiusVariation=(rdm()*2+9)*0.1
				local onComplete
				if a==1 then
					--onComplete = fireIt
				end
				local thisLife = life*(rdm()*6+7)*0.1
				local star2 = { imgStart = { life = thisLife, alpha = 1, size = {2,2},stroke={0,0,0,0}, pos = {params.pos[1],params.pos[2],0,0},color=colors[colorIndex]},
								imgEnd = { onComplete = onComplete, alpha = 0.8, scale ={1.2,1.2},pos={math.cos(angle)*radius*radiusVariation*thisLife/life,math.sin(angle)*radius*radiusVariation*thisLife/life,0,0,move = 1, ease = easing.outQuad}},
								imgInfo = { group = mGroup, max = 150}}
				gPS.newCircle(star2)	
			end
		end
		
		local maryWings = display.newImage("assets/mary/wings.png")
		maryWings.x,maryWings.y,maryWings.xScale,maryWings.yScale = 525.75/2.5 +142 ,776.30/2.5 -60 ,(1/2.5)*0.5 ,(1/2.5)*0.5
		
		local maryBodyAndNeck = display.newImage("assets/mary/greetingAnimation/Body.png")
		maryBodyAndNeck.x,maryBodyAndNeck.y,maryBodyAndNeck.xScale,maryBodyAndNeck.yScale = 525.75/2.5 +150 ,776.30/2.5 -6 ,1/2.5 ,1/2.5
		
		local maryBody = display.newImage("assets/mary/greetingAnimation/Body_noNeck.png")
		maryBody.x,maryBody.y,maryBody.xScale,maryBody.yScale = 525.75/2.5 +150 ,776.30/2.5 -6 ,1/2.5 ,1/2.5
		
		local maryOpenEyes = display.newImage("assets/mary/greetingAnimation/eyesOpen.png")
		local maryClosedEyes = display.newImage("assets/mary/greetingAnimation/eyesClosed.png")
		
		local maryBlinks = ui.blink(maryOpenEyes,maryClosedEyes)
		
		local maryAnimation = ui.newAnimation{
						 comps = {
						 {
						  path = "assets/mary/greetingAnimation/Head.png",
						  x = { 491.25,492.7,494.15,495.45,496.9,498.3,499.7,501.15,502.6,501.3,500.05,498.7,497.45,496.2,494.95,493.7,492.35,491.15,489.9 },
						  y = { 455.3,455.2,455.05,454.95,454.8,454.75,454.65,454.65,454.55,454.65,454.7,454.75,454.75,454.9,454.95,455.05,455.2,455.4,455.55 },
						  rotation = { 0.6023406982421875,1.204559326171875,1.808258056640625,2.4115447998046875,3.0142974853515625,3.6172637939453125,4.21942138671875,4.8223876953125,5.4251556396484375,4.883148193359375,4.34027099609375,3.7974853515625,3.2548828125,2.712554931640625,2.1697540283203125,1.62744140625,1.0848388671875,0.542022705078125,0 },
						 },
						 {
						  displayObject = maryOpenEyes,
						  x = { 491.25,492.7,494.15,495.45,496.9,498.3,499.7,501.15,502.6,501.3,500.05,498.7,497.45,496.2,494.95,493.7,492.35,491.15,489.9 },
						  y = { 455.3,455.2,455.05,454.95,454.8,454.75,454.65,454.65,454.55,454.65,454.7,454.75,454.75,454.9,454.95,455.05,455.2,455.4,455.55 },
						  rotation = { 0.6023406982421875,1.204559326171875,1.808258056640625,2.4115447998046875,3.0142974853515625,3.6172637939453125,4.21942138671875,4.8223876953125,5.4251556396484375,4.883148193359375,4.34027099609375,3.7974853515625,3.2548828125,2.712554931640625,2.1697540283203125,1.62744140625,1.0848388671875,0.542022705078125,0 },
						  scaleComponent = true,
						 },
						 {
						  displayObject = maryClosedEyes,
						  x = { 491.25,492.7,494.15,495.45,496.9,498.3,499.7,501.15,502.6,501.3,500.05,498.7,497.45,496.2,494.95,493.7,492.35,491.15,489.9 },
						  y = { 455.3,455.2,455.05,454.95,454.8,454.75,454.65,454.65,454.55,454.65,454.7,454.75,454.75,454.9,454.95,455.05,455.2,455.4,455.55 },
						  rotation = { 0.6023406982421875,1.204559326171875,1.808258056640625,2.4115447998046875,3.0142974853515625,3.6172637939453125,4.21942138671875,4.8223876953125,5.4251556396484375,4.883148193359375,4.34027099609375,3.7974853515625,3.2548828125,2.712554931640625,2.1697540283203125,1.62744140625,1.0848388671875,0.542022705078125,0 },
						  scaleComponent = true,
						 },
						 {
						  path = "assets/mary/greetingAnimation/LeftArm.png",
						  x = { 583.65,583.4,583.1,582.75,582.4,582.15,581.8,581.4,581.1,581.4,581.7,582,582.35,582.6,582.85,583.2,583.4,583.7,584 },
						  y = { 656.15,656.55,656.95,657.3,657.7,658.1,658.4,658.85,659.15,658.8,658.55,658.2,657.85,657.5,657.15,656.85,656.5,656.1,655.8 },
						  rotation = { 0.5761260986328125,1.1512451171875,1.7278900146484375,2.30419921875,2.8800201416015625,3.456146240234375,4.033294677734375,4.6087646484375,5.1859130859375,4.666961669921875,4.1481170654296875,3.62945556640625,3.110198974609375,2.5921783447265625,2.07373046875,1.5558013916015625,1.0367584228515625,0.5184173583984375,0 },
						  yOffset = 30,
						  xOffset = 15
						 },
						 {
						  path = "assets/mary/greetingAnimation/RightForearm.png",
						  x = { 379.55,380.55,381.6,382.9,384.15,385.65,387.25,388.85,390.65,389.05,387.55,386.1,384.75,383.5,382.35,381.3,380.35,379.45,378.75 },
						  y = { 626.15,623.6,621.05,618.55,616.1,613.8,611.6,609.45,607.5,609.3,611.15,613.15,615.25,617.4,619.6,621.75,624.1,626.45,628.85 },
						  rotation = { 3.8175048828125,7.6357574462890625,11.453445434570313,15.27020263671875,19.087600708007813,22.905563354492188,26.723602294921875,30.54046630859375,34.358062744140625,30.9222412109375,27.487701416015625,24.051406860351563,20.615036010742188,17.180221557617188,13.742935180664063,10.307693481445313,6.871795654296875,3.4352264404296875,0 },
						  yOffset = 32,
						  xOffset = 2
						 },
						 {
						  path = "assets/mary/greetingAnimation/RightArm.png",
						  x = { 442.15,442.15,442.15,442.2,442.2,442.25,442.3,442.3,442.4,442.35,442.3,442.25,442.2,442.2,442.15,442.15,442.15,442.15,442.15 },
						  y = { 632.3,631.85,631.35,630.9,630.45,629.95,629.5,629.05,628.6,629,629.4,629.85,630.25,630.65,631.1,631.5,631.95,632.35,632.8 },
						  rotation = { 0.731719970703125,1.464080810546875,2.195953369140625,2.9271087646484375,3.6599273681640625,4.3915557861328125,5.12347412109375,5.8554534912109375,6.5881195068359375,5.9281158447265625,5.27001953125,4.6113739013671875,3.952392578125,3.293212890625,2.634918212890625,1.975921630859375,1.31640625,0.658294677734375,0 },
						  yOffset = 32,
						  xOffset = 2
						 },
						 {
						  path = "assets/mary/greetingAnimation/LeftHand.png",
						  x = { 651.7,651.35,651,650.7,650.3,649.95,649.65,649.25,648.85,649.2,649.5,649.85,650.15,650.5,650.8,651.15,651.4,651.75,652 },
						  y = { 783.1,783.9,784.7,785.4,786.15,786.95,787.7,788.45,789.15,788.5,787.8,787.2,786.5,785.8,785.15,784.4,783.75,783.05,782.3 },
						  rotation = { -0.3059844970703125,-0.611968994140625,-0.9178924560546875,-1.223785400390625,-1.531341552734375,-1.837066650390625,-2.1435699462890625,-2.4499359130859375,-2.7561798095703125,-2.4804840087890625,-2.204681396484375,-1.92877197265625,-1.653656005859375,-1.378448486328125,-1.1014404296875,-0.8261260986328125,-0.5507659912109375,-0.275390625,0 },
						  yOffset = 30,
						  xOffset = 15
						 },
						 {
						  path = "assets/mary/greetingAnimation/RightHand.png",
						  x = { 333.7,338,342.7,347.95,353.55,359.6,365.9,372.45,379.2,373.1,367.2,361.4,355.95,350.75,345.85,341.25,337.1,333.3,330 },
						  y = { 592.7,586.15,579.95,574.15,568.9,564.25,560.05,556.5,553.45,556.1,559.3,562.95,567,571.55,576.45,581.75,587.4,593.4,599.7 },
						  rotation = { 6.4828338623046875,12.967483520507813,19.451416015625,25.934951782226563,32.41908264160156,38.903656005859375,45.3875732421875,51.87184143066406,58.35560607910156,52.51963806152344,46.68363952636719,40.84889221191406,35.01301574707031,29.178131103515625,23.341827392578125,17.506027221679688,11.6707763671875,5.8347015380859375,0 },
						  yOffset = 30
						 }
						},
						 x = 150,
						 y = -15,
						 scale = 1/2.5,
						 speed = 0.75
						}
						
		maryWings.isVisible = false
		maryBody.isVisible = false
		maryBodyAndNeck.isVisible = false
		maryAnimation.hide()
		
		local maryGroup = display.newGroup()
		maryGroup:insert(maryWings)
		maryGroup:insert(maryBodyAndNeck)
		maryGroup:insert(maryBody)
		maryGroup:insert(maryAnimation.displayObject)
		
		localGroup:insert(maryGroup)
		maryGroup.xScale, maryGroup.yScale = 1.25,1.25
		maryGroup.y = maryGroup.y + 225
		maryGroup.x = maryGroup.x - 130
		maryGroup.rotation = -30
		
		local winSound = audio.loadSound("assets/sound/win.mp3")
		local winSoundChannel
		
		local function continue()
			localGroup:remove(loadingBackground)
			localGroup:remove(message)
			
			maryBlinks.stopBlinking()
			maryAnimation.kill()
			
			localGroup:remove(maryGroup)
			
			continue=nil
			killTheParty=nil
		end
		killTheParty = function()
			startTheParty =nil
			vanish=nil
			continue()
		end
		
		local fireTimer = nil
		local function vanish()
			timer.performWithDelay(300, continue)
		end
		
		startTheParty = function()
			pauseIt = nil
			continueIt = nil
			
			saveData(4,5)
			
			soundController.kill("bgsound")
			soundController.playNew{
						path = "assets/sound/voices/cap4/int4_MThanksRace.mp3",
						actionTimes = {0},
						action =	function()
									end,
						onComplete = function()
									end
						}
			
			winSoundChannel = audio.play(winSound,{loops=0})
			
			local function continueToNextScene()
				startTransition(false)
				timer.cancel(fireTimer)
				fireTimer=nil
				timer.performWithDelay(1500, vanish)
			end
			
			local function repeatThisScene()
				startTransition(true)
				timer.cancel(fireTimer)
				fireTimer=nil
				timer.performWithDelay(1500, vanish)
			end
			
			local points = calculatePoints(misses, extras, startTime, finishTime, difficultyLevel, "com.tapmediagroup.race")
			
			director:openPopUp({points = points,
								hideAction = continueToNextScene,
								repeatAction = repeatThisScene,
								killCaller = killAll
								},
								"pointsView")
			
			maryAnimation.start()
			maryAnimation.appear(300)
			
			maryBlinks.openEyes()
			maryBlinks.startBlinking()
			
			loadingBackground.isVisible = true
			maryWings.isVisible = true
			maryBody.isVisible = true
			maryBodyAndNeck.isVisible = true
			
			loadingBackground.alpha = 0
			maryWings.alpha = 0
			maryBody.alpha = 0
			maryBodyAndNeck.alpha = 0
			
			transition.to(loadingBackground,{alpha=1,time=300})
			transition.to(maryWings,{alpha=1,time=300})
			transition.to(maryBody,{alpha=1,time=300})
			transition.to(maryBodyAndNeck,{alpha=1,time=300})
			
			local function newBomb()
				fireIt()
				fireTimer = timer.performWithDelay(500, newBomb )
			end
			fireTimer = timer.performWithDelay(500, newBomb )
		end
	end
	prepareTheParty()
	
	--======================================
	-- TRANSITION TO INTERACTIVITY
	--======================================
	local function prepareTransition()
		local star1 = display.newImage("assets/whiteStar.png")
		star1:setReferencePoint(display.TopLeftReferencePoint)
		star1.x = 10
		star1.y = 20
		star1.xScale = 0.1
		star1.yScale = 0.1
		star1.isVisible = false
		star1:setReferencePoint(display.CenterReferencePoint)
		localGroup:insert(star1)
		
		local star2 = display.newImage("assets/whiteStar.png")
		star2:setReferencePoint(display.CenterReferencePoint)
		star2.x = 350
		star2.y = 40
		star2.xScale = 0.5
		star2.yScale = 0.5
		star2.isVisible = false
		localGroup:insert(star2)
		
		local star3 = display.newImage("assets/whiteStar.png")
		star3:setReferencePoint(display.CenterReferencePoint)
		star3.x = 320
		star3.y = 300
		star3.xScale = 0.05
		star3.yScale = 0.05
		star3.isVisible = false
		localGroup:insert(star3)
		
		local star4 = display.newImage("assets/whiteStar.png")
		star4:setReferencePoint(display.CenterReferencePoint)
		star4.x = 30
		star4.y = 280
		star4.xScale = 0.2
		star4.yScale = 0.2
		star4.isVisible = false
		localGroup:insert(star4)
		
		star1:setFillColor(193,39,45)
		star2:setFillColor(140,198,63)
		star3:setFillColor(140,214,234)
		star4:setFillColor(255,255,0)
		
		killTransition = function()
			changeScene=nil
			loadInteraction=nil
			continue=nil
			vanish=nil
			startTransition =nil
			killTransition=nil
			
			localGroup:remove(star1)
			localGroup:remove(star2)
			localGroup:remove(star3)
			localGroup:remove(star4)
		end
		
		local repeatInteraction
		
		local function repeatScene()
			director:changeScene("Interactivity4","crossFade")
			repeatScene=nil
		end
		
		local function changeScene()
			adPreloader:changeScene("Adventure5","crossFade")
			--director:changeScene("Adventure5","crossFade")
			changeScene=nil
		end
		
		local function loadInteraction()
			localGroup:remove(star1)
			localGroup:remove(star2)
			localGroup:remove(star3)
			localGroup:remove(star4)
			
			if repeatInteraction then
				timer.performWithDelay(500, repeatScene)
			else
				timer.performWithDelay(500, changeScene)
			end
			
			loadInteraction=nil
		end
		
		local function continue()
			local whiteBackground
			if repeatInteraction then
				whiteBackground = display.newRect(0,0,width,height)
				whiteBackground:setFillColor(255,255,255)
			else
				whiteBackground = display.newImageRect("assets/world/fairiesTownBlurred.jpg",width,height)
				whiteBackground:setReferencePoint(display.TopLeftReferencePoint)
				whiteBackground.x = 0
				whiteBackground.y = 0
			end
			whiteBackground:setFillColor(255,255,255)
			whiteBackground.alpha=0
			localGroup:insert(whiteBackground)
			transition.to(whiteBackground,{alpha=1,time=1000,onComplete=loadInteraction})
			continue=nil
		end
		
		local growStars
		
		local function vanish()
			continue()
			vanish=nil
		end
		
		startTransition = function(shouldRepeat)
			if shouldRepeat then repeatInteraction = shouldRepeat end
			
			star1.isVisible = true
			star2.isVisible = true
			star3.isVisible = true
			star4.isVisible = true
			
			star1.alpha = 0
			star2.alpha = 0
			star3.alpha = 0
			star4.alpha = 0
			
			local function animateStars()
				transition.to(star1,{alpha=1,time=700})
				transition.to(star2,{alpha=1,time=700})
				transition.to(star3,{alpha=1,time=700})
				transition.to(star4,{alpha=1,time=700})
				
				transition.to(star1,{xScale=3,yScale=3,		time=1500,transition=easing.inExpo})
				transition.to(star2,{xScale=2.5,yScale=2.5,	time=1500,transition=easing.inExpo})
				transition.to(star3,{xScale=2,yScale=2,		time=1500,transition=easing.inExpo})
				transition.to(star4,{xScale=3.5,yScale=3.5,	time=1500,transition=easing.inExpo})
			end
			timer.performWithDelay(200, animateStars)
			
			timer.performWithDelay(500, vanish)
			startTransition=nil
		end
	end
	prepareTransition()
	
	--====================================================================--
	-- SET UP A PAUSE OVERLAY
	--====================================================================--
	overlay = display.newRect(0,0,width,height)
	overlay:setFillColor(0,0,0,64)
	overlay.alpha=0
	localGroup:insert(overlay)
	
	gameOver = function()
		if overlay then
			transition.to( overlay, { alpha=1, time=300, delay=0 } )
		end
		director:openPopUp({hideAction = restartIt,
							killCaller = killAll,
							},
							"goMenu")
	end
	
	--======================================
	-- MENU BUTTON
	--======================================
	-- ACTION
	local continueTimer
	local function continueGame( event )
		paused=false;
		if continueIt then
			screenMessages.resume()
			continueIt()
			soundController.resume()
		end
    end
	local hideMenu = function ()
		if overlay then
			transition.to( overlay, { alpha=0, time=300, delay=0 } )
		end
		continueTimer = timer.performWithDelay(300, continueGame )
	end
	local menuButtonAction = function ( event )
		if event.phase == "release" then
			if continueTimer then
				timer.cancel(continueTimer)
			end
			if pauseIt and continueIt then
				screenMessages.pause()
				paused=true
				pauseIt()
				soundController.pause()
				if overlay then
					transition.to( overlay, { alpha=1, time=300, delay=0 } )
				end
				director:openPopUp({inGame = true,
									animated = true,
									hideAction = hideMenu,
									startFromAdventure = nil,
									killCaller = killAll,
									},
									"igMenu")
			end
		end
	end
	-- UI ELEMENT
	local menuButton = ui.newButton{
					default = "assets/botonMenu.png",
					onEvent = menuButtonAction,
					text = "Menu",
					size = 72,
					font = mainFont1,
					emboss = true,
					textColor={66,33,11,255},
					id = "bt01"}
	menuButton:setReferencePoint(display.CenterRightReferencePoint)
	menuButton.x=display.screenOriginX+display.viewableContentWidth-15
	menuButton.y=display.screenOriginY+25
	menuButton.xScale,menuButton.yScale=0.45,0.45
	localGroup:insert(menuButton)
	
	screenMessages.sendToFront()
	overlay:toFront()
	
	--======================================
	-- EXECUTE FIRST ACTION, THEY WILL BE CHAINEXECUTED
	--======================================
	startAdventure()
	
	return localGroup
end